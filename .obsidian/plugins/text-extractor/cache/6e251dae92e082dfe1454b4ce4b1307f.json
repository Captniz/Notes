{"path":"TELECOMUNICAZIONI/DOCS/5 Tecniche di trasmissione Analogiche e Digitali.pdf","text":"304 Tecniche di trasmissione analogiche e digitali8UNITÀ La trasmissione di segnali, di tipo digitale o analogico, riveste grande importanza in Elet- In linea generale un sistema di trasmissione comprende un trasmettitore, che emette il segnale a cui è associata l’informazione, un mezzo di trasmissione, attraverso il quale la tra- smissione viene trasferita, e un ricevitore, che fornisce in uscita una riproduzione riconoscibile del segnale trasmesso. I segnali da trasmettere possono essere segnali vocali, segnali televi- sivi, sequenze di dati digitali fornite da elaboratori, segnali provenienti da sensori remoti. In canale, i segnali subiscono distorsioni e attenuazioni e vengono alterati dal rumore e da interferenze; il ricevitore deve La scelta della tecnica di trasmissione è condizionata principalmente dalla distanza a cui deve essere trasferita l’informazione, dalla velocità di trasmissione richiesta e dalle caratte- Mentre, per distanze molto limitate, spesso basta condizionare i segnali in modo da garantire una sufficiente immunità al rumore, ricorrendo per esempio alla conversione tensione-corrente oppure alla conversione analogico-digitale con livelli elettrici adeguati, per distanze di una certa modulazione e di multiplazione. Nel campo della trasmissione di segnali, hanno assunto grande rilevanza i sistemi di tra- smissione dati, sia su aree estese sia in ambito locale. Fra le numerose problematiche a essi inerenti, sono fondamentali quelle relative all’interfacciamento fra apparati di elaborazione e apparati di trasmissione. In particolare risulta sempre più evidente la necessità di imple- 8.1 Tecniche di modulazione Il processo di modulazione consiste essenzialmente nell’impiego di un segnale, detto portante (carrier), per trasferire il contenuto informativo di un altro segnale, detto modulante, al fine di adattare le caratteristiche del segnale da trasmettere ai mezzi trasmissivi a disposizione segnale audio (20  Hz ' 20  kHz) mentre la portante può essere un segnale sinusoidale ad alta frequenza, adatto quindi a essere irradiato, se si usa lo spazio come mezzo trasmissivo La modulante modifica uno o più parametri (ampiezza, frequenza, fase) della portante con una legge precisa e definita; il segnale che si ottiene, ovvero il segnale modulato, è ovviamente correlato con il segnale modulante e ne contiene quindi l’informazione; questa demodulazione effettuato nel ricevitore. In ﬁ g.  8.1 è illustrato lo schema base di un generico sistema di comunicazione che comprende un processo di modulazione. Fra le varie tecniche di modulazione, riassunte in tab. 8.1, si possono distinguere la modu- lazione analogica e quella digitale (vedi par.  8.4), intendendo con ciò che la forma d’onda modulante è in un caso analogica e nell’altro digitale. In entrambi i casi poi, la portante può segnale armonico, ovvero di tipo sinusoidale, o un segnale impulsivo. Segnale di ingresso Trasmettitore Modulatore Ricevitore Demodulatore Segnale di uscita Mezzo di trasmissioneModulatore ﬁ g. 8.1 Sistema di trasmissione. E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 305 8.2 Modulazioni analogiche con portante armonica tab. 8.1 Tipi di modulazioni. Modulazioni analogiche Modulazioni digitali Portante armonica Portante impulsiva Portante armonica Portante impulsiva AM DSB SSB FM PM PAM PWM PPM PFM ASK OOK FSK PSK PCM DM 8.2 Modulazioni analogiche con portante armonica Si consideri la situazione in cui il segnale modulante sia esprimibile con la relazione () cosvt V tmm m~= [8.1] e la portante, anch’essa di tipo sinusoidale con pulsazione ~2 mp~ 2 , sia espressa dalla relazione () () ( )cos cosvt A t A tpp {~ i== + [8.2] La portante potrà essere modulata variando, in funzione di vm (t), l’ampiezza A, oppure la pulsazione ~p (e quindi la frequenza fp), oppure la fase i. Si ottengono così la modulazione di ampiezza (AM) e le modulazioni angolari, di frequenza (FM) e di fase (PM). 8.2.1 Modulazione di ampiezza (AM) In ﬁ g.  8.2 è illustrato lo schema di principio. Si supponga che l’ampiezza A della portante dipenda da vm (t) secondo la relazione A (t) = A + kaVm cos ~m t. Sostituendo nell’eq.  [8.2] all’ampiezza A l’espressione A (t) e scegliendo, per comodità, il riferimento temporale in modo che sia i = 0, si ottiene l’espressione del segnale modulato () ( )cos cos cos cosvt A k A V tt A m t t11a m mp m p~~ ~ ~=+ = +cm [8.3] dove ka è una costante che dipende dal modulatore e il fattore mk A V a m= [8.4] ESERCIZI > 1-5 Modulazioni LAB 8.1 ﬁ g. 8.2 Modulazione AM: schema di principio. Vm Vp fm Modulante t f fp B t V Portante t A Modulatore AM E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 306 Tecniche di trasmissione analogiche e digitali8UNITÀ t v (t) 0 t Inviluppo Portante non modulata m = 0 mA vm (t) 0 è detto indice di modulazione o profondità di modulazione. L’indice di modulazione spe- cifica di quanto la modulante incide sulla portante e deve presentare valori compresi fra m 2 1 si ha un’onda distorta o sovramodulata. In ﬁ g.  8.3 è illustrato il segnale modulato con indice di modulazione m = 0,75 (o, secondo una terminologia più comune, con modulazione del 75%). Si noti che l’inviluppo del segnale modulato riproduce proprio In ﬁ g.  8.4 sono invece illustrati i segnali modulati, rispettivamente, con indice di modu- lazione m = 1 e m = 1,5; la fig.  8.4b presenta un’evidente distorsione. Sviluppando con le formule di Werner la relazione [8.3] si ricava l’espressione () ( ) ( )cos cos cosvt A f t mA ff t mA ff t2 2 2 2 2pp m p mrr r=+ - + + [8.5] ﬁ g. 8.3 Segnale = 0,75. ESERCIZIO > 1 ﬁ g. 8.4 Segnali a) m = 1 e (b) m = 1,5. Assenza della modulante m = 0 m = 0 m = 1 = 100% 0 2 4 –2 –4 t v(t) (a) (b) Distorsione t 0 2 5 –2 –5 v(t) m = 1,5 = 150% E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 307 8.2 Modulazioni analogiche con portante armonica ffm fp – fm fp + fm Vm A fp V ( f ) = mA kaVm 22 = mA kaVm 22 che pone in evidenza le componenti del segnale modulato. Lo spettro di frequenza del ﬁ g.  8.5 insieme allo spettro del segnale modulante di ampiezza Vm. Si nota la presenza di una componente di ampiezza A e frequenza fp e di due componenti laterali di ampiezza mA kV 22 am= e frequenza, rispettivamente, fp - fm e fp + fm. Risulta quindi evidente che, per effetto della modulazione, il segnale vm (t) viene traslato in un campo di frequenze superiore ed esattamente a valori che dipendono dalla f p). In tal modo segnali di bassa frequenza possono essere convertiti in segnali ad alta frequenza così da poter essere trasmessi lungo un canale di trasmissione; La possibilità di modulare più segnali, in particolare segnali audio, con portanti di frequenze diverse consente poi di effettuare trasmissioni radiofoniche da più stazioni man-f p compresa fra 540 e 1600  kHz distanziate, l’una dall’altra, di 10  kHz. Dall’esame dello spettro di fig.  8.5 si deduce che quanto più alto è l’indice di modula- zione tanto più alta risulta l’ampiezza delle componenti laterali e quindi del segnale utile Per valutare la potenza del segnale modulato si considera l’eq. [8.5] supponendo che il modulatore sia chiuso su un carico resistivo R sul quale viene dissipata la potenza. La potenza totale è data dalla somma delle potenze relative alle tre componenti spet- trali: P p relativa alla portante, PI relativa alla componente di frequenza inferiore fp - fm , PS relativa alla componente di frequenza superiore fp + fm , ossia PT = Pp + PI + PS [8.6] La potenza effettiva è data da V P R V RR V2 2 max maxRMS 2 2 2 == = dn [8.7] dove VRMS 2 è il valore efficace della tensione, Vmax è il valore di picco ed R è il carico appli- cato in uscita. Poiché per la portante Vmax = A, e per le righe laterali V mA 2max = , si ricava P R A 2p 2 = P R Am 8I 22 = P R mA 8S 22 = [8.8] e in definitiva 24 1 2 PP P P R A R mA P m 22 2 2 Tp I S p=+ + = + = +cm [8.9] ﬁ g. 8.5 Spettri di frequenza di un segnale modulante sinusoidale e del relativo segnale ESERCIZIO > 5 E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 308 Tecniche di trasmissione analogiche e digitali8UNITÀ fBfp – Bfp + B A fp V ( f ) (a)(b) Segnale modulante Banda laterale inferiore Banda laterale superiore Si nota che per m = 1 la potenza complessiva associata alle due componenti laterali è pari alla metà di quella associata alla portante. Inoltre la potenza Pp non varia con l’indice di modulazione mentre le potenze PI e PS aumentano con m 2. Un parametro che permette di confrontare le potenze associate alle componenti laterali con quella della portante è il rendimento della modulazione h 24P P P P m m 2 2 T I T Sh === + [8.10] che raggiunge il valore massimo del 16,7% per m = 1. Modulante non armonica. Quanto detto in riferimento a una modulante sinusoidale vale ovviamente anche per segnali modulanti complessi. In ﬁ g.  8.6 è illustrato lo spettro di un segnale non sinusoidale con larghezza di banda B accanto a quello del segnale modulato; in questo caso si notano, oltre alla portante A, una banda laterale inferiore e una banda laterale superiore delimitate dalle frequenze fp - B e fp + B. Si noti che il contenuto informativo del segnale modulante originario è conservato ed espresso da entrambe le bande laterali (o da entrambe le righe laterali riferendosi a fig. 8.5); rivelatore a diodo e condensatore illustrato in ﬁ g.  8.7a. Il segnale modulato vi viene applicato all’ingresso del rivelatore; durante la conduzione del diodo, C si carica al valore di picco di vi , per poi scaricarsi su R quando il diodo non conduce. Se il valore della costante di tempo RC è scelto opportunamente, il segnale vo segue abbastanza fedelmente l’inviluppo della portante e restituisce quindi il segnale modulante. inviluppo segnale rivelato: vo portante ad alta frequenza: vi + – vi voR (a) (b) C D ﬁ g. 8.6 Spettri di frequenza di un segnale modulante complesso e del segnale modulato. ﬁ g. 8.7 (a) Rilevatore di inviluppo eb) forme d’onda relative. E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 309 8.2 Modulazioni analogiche con portante armonica Soppressione della portante. Un primo inconveniente di questa tecnica consiste nel fatto che l’elevata potenza richiesta per trasmettere la portante risulta sostanzialmente sprecata p - B a fp + B) limitando le potenzialità offerte dalla traslazione di frequenza (vedi par. 8.6). Per questi motivi vengono anche utilizzate tecniche di modulazione AM particolari, quali la DSB (Double Side Band) e la SSB (Single Side Band) o BLU (Banda laterale Unica). Con la tecnica DSB vengono trasmesse solo le bande laterali e la portante è soppressa. Tuttavia, per permettere la demodulazione, alla ricezione occorrerà ricostruire e reinserire Molto usata è la tecnica SSB, specie nelle trasmissioni audio in cui interessa solo l’intellegi- bilità del messaggio ricevuto e, in certa misura, sono tollerabili distorsioni di fase ed errori di frequenza (p. es. nei radiotelefoni). In questo caso vengono soppresse sia la portante sia una delle Low Side Band) o quella superiore (USB: Upper Side Band). Si ottiene così una riduzione ancora maggiore della potenza richiesta; inoltre lo spettro del segnale modulato viene a occupare un campo di frequenza limitato B del segnale modulante. Ovviamente, per demodulare il segnale, occorre ricostruire la portante e il ricevitore risulta quindi piuttosto complesso e sofisticato. 8.2.2 Modulazione di frequenza (FM) Questo tipo di modulazione si ottiene variando la frequenza (ovvero la pulsazione) della segnale armonico espresso dall’eq. [8.2], in cui, per semplicità, sia i = 0. Riferendoci al segnale modulante sinusoidale espresso dall’eq. [8.1], la pulsazione istan- tanea ~ del segnale modulato sarà ~ = ~ p + kfVm cos ~m t [8.11] dove kf è una costante di proporzionalità caratteristica del modulatore. La frequenza istantanea del segnale modulato sarà quindi cos cosff k Vt f f t 2p f mm p mr ~~D=+ =+ [8.12] dove Yfk V 2fm rD = è la deviazione di frequenza. Quest’ultima rappresenta la massima differenza tra la frequenza del segnale modulato e la frequenza fp propria della portante. Volendo ricavare l’espressione analitica del segnale modulato, occorre considerare che il suo angolo di fase istantanea { (t) viene a dipendere dalla pulsazione istantanea ~ espressa dall’eq.  [8.11]. Poiché vale la relazione Y tdd~{= , la fase istantanea risulta () ( )cos sentt k V t t t k V tddpf m m f m m mp{~ ~ ~ ~ ~ ~== + = +yy [8.13] L’espressione del segnale modulato sarà quindi () ()cos cos sen cos senvt A t A t k V tA f t f f t2pf m m mp m m{~ ~ ~r ~ D == + = +d dn n [8.14] Il fattore m f f f m D = [8.15] è detto indice di modulazione ed esprime il rapporto fra la deviazione di frequenza dovuta alla modulazione e la frequenza del segnale modulante. ESERCIZI > 6, 7 E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 310 Tecniche di trasmissione analogiche e digitali8UNITÀ (a) (b) vm(t) vm(t) v(t) t t t v(t) t Quanto detto relativamente a un segnale modulante armonico (vedi ﬁ g.  8.8a) vale anche per segnali analogici di forma qualsiasi (vedi p. es. ﬁ g.  8.8b), nel qual caso, ovviamente, la pulsazione istantanea è espressa dalla relazione~ = ~ p + kf vm (t) [8.16] Lo spettro di un segnale FM si determina sviluppando l’eq. [8.14] in serie di Bessel con un f p , la portante, e da numerose componenti laterali (teoricamente infinite) spaziate, le une dalle altre, di fm . L’ampiezza delle componenti laterali è funzione di YYmf f k V 2fm f m rD== . In particolare, se mf è piccolo (mf 1 0,5) solo le righe laterali di frequenza fp - fm e fp + fm hanno ampiezza non trascurabile; al crescere di mf diventano apprezzabili anche altre componenti. Risulta quindi che: — a parità di fm , al crescere dell’ampiezza della modulante, mf e Df aumentano e perciò lo spettro comprende un numero sempre maggiore di componenti apprezzabili; — a parità di ampiezza Vm , al crescere della frequenza fm della modulante, mf diminuisce e quindi lo spettro si stringe ossia la banda di frequenza occupata B si riduce. In ﬁ g.  8.9 sono riportati gli spettri di 4 segnali FM ottenuti mantenendo fm costante e variando Vm , e di conseguenza mf e Df. Si nota che, al crescere di mf la banda B si allarga e il numero di componenti laterali aumenta, anche se con ampiezza via via trascurabile. ﬁ g. 8.8 Segnali in frequenza. E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 311 8.2 Modulazioni analogiche con portante armonica 2∆ f f mf = 0,2 fp – fm fp fp + fm fp + 2fm fp + 8fmfp – 8fm fp – 2fm mf = 1 mf = 5 mf = 10 f f f fp fp fp 2∆f B B B fp + 14fmfp – 14fm 2∆f In pratica la banda di frequenza BT richiesta per la trasmissione è data, con approssimazione sufficiente nella maggior parte dei casi, dalla relazione di CarsonB T = 2 (Df + fm) = 2fm (1 + mf) [8.17] Per esempio, nel caso di trasmissioni radio FM, ove si stabilisce per fm il valore massimo di 15 kHz e per Df il valore di 75 kHz, risulta BT = 180 kHz. La banda richiesta appare considerevole; si noti però che, nel caso della FM, la tra- smissione viene effettuata con portante compresa fra 88 e 108  MHz e quindi BT è di fatto percentualmente piccola; ciò costituisce un pregio essenziale per i motivi che verranno vedi par. 8.6). Il vantaggio principale offerto dalla tecnica FM consiste nella possibilità di ottenere nella trasmissione un’elevata immunità da disturbi e interferenze se l’indice di modu-m f H 5); ciò, come si è detto, a spese di una più ampia banda BT richiesta. Da un punto di vista energetico, la potenza richiesta per la trasmissione del segnale FM è uguale a quella richiesta per la trasmissione della sola portante non modulata; al variare m f , varia la distribuzione dell’energia fra la componente di frequenza fp e le componenti laterali. ﬁ g. 8.9 Spettri di m costante per diversi valori m e quindi di mf . E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 312 Tecniche di trasmissione analogiche e digitali8UNITÀ 8.2.3 Modulazione di fase (PM) Questa tecnica consiste nel variare la fase i dell’onda sinusoidale portante in funzione del segnale modulante. Con riferimento alle espressioni analitiche [8.1] e [8.2] relative alla fase del segnale modulato risulta i = i 0 + kpVm cos ~m t = i0 + Di cos ~m t [8.18] dove kp rappresenta la sensibilità del modulatore [radYV] e Di = kpVm , detta deviazione di fase, indica il valore massimo della variazione di fase introdotta dalla modulazione. Supponendo nulla i0 , l’espressione del segnale modulato è () () ( ) ( )cos cos cos cosvt A t A t A t tpp m{~ i { ~ i ~D== + = + [8.19] Il termine (~p t + Di cos ~m t) definisce il valore istantaneo della fase del segnale modulato; da questo si possono ricavare la pulsazione e la frequenza istantanee del segnale PM t t d d senpm m~ { ~i ~ ~D== - da cui ff f tsenpm mi~D=- [8.20] Si noti l’analogia fra l’espressione di f nelle eq. [8.20] e [8.12]. Il fattore Di fm rappresenta la mas- sima deviazione di frequenza (qui dipendente anche da fm) che subisce la portante quando viene modulata in fase; questo fattore può dunque essere assimilato alla deviazione di frequenza Df. Nella modulazione PM lo spettro di frequenza è simile a quello dei segnali FM; la banda necessaria per la trasmissione è data approssimativamente dalla relazione, analoga all’eq.  [8.17] essendo Df = fm Di, BT = 2 (Di fm + fm) = 2 fm (1 + Di) [8.21] In ﬁ g. 8.10 sono illustrati due esempi. f (a) ∆θ = 1 rad fm = 1 kHz f (b) ∆θ = 1 rad fm = 2 kHz 8.3 Modulazioni analogiche con portante impulsiva Come si è detto precedentemente, il segnale portante può anche essere costituito da una caratterizzati da ampiezza, frequenza e durata costanti. Variando uno dei parametri caratteristici della portante impulsiva in funzione di una modulante analogica, 8.3.1 Modulazione ad ampiezza di impulsi (PAM) In ﬁ g.  8.11 sono illustrate le forme d’onda relative alla tecnica PAM (Pulse Amplitude Modulation) nel caso di una modulante sinusoidale. Si nota che il segnale modulato v (t) è costituito da impulsi di ampiezza proporzionale a campioni del segnale modulante prelevati f p della portante viene a coincidere con la frequenza fc con cui viene campionato il segnale: si potrà pertanto parlare indifferentemente di frequenza frequenza di campionamento. ﬁ g. 8.10 Spettri di e frequenze f m diverse. Campionamento PRESENTAZIONE E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 313 8.3 Modulazioni analogiche con portante impulsiva (a) (b) (c) (d) vm(t) t vc(t) v (t) V( f ) t Tc = 1/fc t ffm 2fcfc 3fc 4fc fc – fm fc + fm 5fc 6fc Lo spettro del segnale modulato, illustrato in fig. 8.11d, evidenzia: una componente continua; una componente di frequenza fm pari a quella del modulante; una fondamentale e le sue armoniche di frequenza fc , 2fc , 3fc ecc.; componenti laterali di frequenza fc ! fm , 2fc ! fm ecc. Nel ricevitore il segnale può essere ricostruito o con un rivelatore di picco a diodo o, meglio, con un filtro passa-basso che elimini tutte le componenti di frequenza superiore a fm . Occorre ricordare che, affinché il segnale possa essere ricostruito correttamente, la frequenza della portante deve essere fc H 2fm ; in altri termini, deve essere rispettato il teorema del campio- namento (teorema di Nyquist-Shannon). Ciò risulta evidente esaminando lo spettro di fig. 8.11d: se fosse fc 1 2fm , la porzione di spettro centrata intorno alla frequenza fc andrebbe a sovrapporsi alla componente di frequenza fm ovvero allo spettro modulante; si originerebbero quindi nel segnale modulato distorsioni non eliminabili note come distorsioni di fold-over o aliasing. ﬁ g. 8.11 Modulazione PAM. a) Modulante. (b) Portante impulsiva.c) Segnale modulato.d) Spettro relativo. ESERCIZI > 8, 9 E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 314 Tecniche di trasmissione analogiche e digitali8UNITÀ B a circa 3,4  kHz (banda base); viene allora impiegata la tecnica PAM con una frequenza di campionamento di 8 kHz. Nei sistemi telefonici si usa più frequentemente una variante della PAM. Secondo questa tecnica il segnale modulante viene semplicemente campionato con frequenza f c (p. es. con un circuito SYH) cosicché il segnale modulato risulta essere bipolare. In ﬁ g. 8.12 è illustrato uno schema a blocchi del modulatore e sono evidenziati i segnali modulante vm (t), portante Vc (t) (che comanda il SYH) e modulato v (t), con i rispettivi spettri di frequenza. La banda fonica è rappresentata convenzionalmente con un triangolo rettangolo. Anche in questo caso, come in fig. 8.11d, nello spettro del segnale modulato si trovano, oltre alla banda base, le bande laterali centrate intorno a fc , 2fc ecc., mentre ovviamente manca la componente continua. In ricezione, per ricostruire il segnale vm , sarà sufficiente un filtro che escluda le componenti di frequenza superiore alla banda base. Appare anche qui evidente che una frequenza di campionamento fc 1 2f determinerebbe nel segnale modulato la sovrapposizione degli spettri; ciò renderebbe impossibile il filtraggio 8.3.2 Modulazioni PWM, PPM, PFM Si tratta di tecniche alquanto speciali non adatte alla trasmissione di segnali a lunga distanza Pulse Width Modulation). Con questa tecnica di modulazione viene fatta variare la larghezza, o durata, degli impulsi in funzione del segnale modulante; la frequenza e l’ampiezza degli impulsi vengono invece mantenute costanti. In ﬁ g. 8.13c è illustrato un segnale modulato in PWM da una modulante sinusoidale. La PWM viene principalmente impiegata nei sistemi di controllo industriali; esempi sono riportati nell’Unità  6. ﬁ g. 8.12 Campionamento spettri relativi. vm(t) vm(t) Vc(t) t Vc(t) t Vc ffc 2fc 2fcfc Vm fB Modulante Portante Banda base Modulatore v(t) Segnale modulato v(t) t V f E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 315 8.4 Modulazioni digitali con portante armonica vm (a) (b) Vp t t (c) VPWM t (d) VPPM t (e) VPFM t Modulazione a posizione di impulsi (PPM: Pulse Position Modulation). Come si vede in ﬁ g. 8.13d, gli impulsi del segnale modulato presentano ampiezza, durata e frequenza costan- ti, ma la loro posizione viene variata in funzione del segnale modulante, che in figura è Pulse Frequency Modulation). Questa tecnica, che essenzialmente è realizzata dai convertitori tensione-frequenza, non è adatta ai sistemi di ﬁ g. 8.13e. 8.4 Modulazioni digitali con portante armonica Quando l’informazione da trasmettere è rappresentata da un segnale binario, costituito da una sequenza di livelli logici 0 e 1, e con esso si modula una portante, si ottiene una Yd e serializzazione dei bit di uscita. Se la portante è di tipo armonico, i parametri che possono essere variati sono, come per le modulazioni analogiche, ampiezza, frequenza e fase. Si ottengono così le modulazioni ﬁ g. 8.13 (a) Modulante sinusoidale.b) Portante impulsiva.c) Segnale PWM.d) Segnale PPM.e) Segnale PFM. E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 316 Tecniche di trasmissione analogiche e digitali8UNITÀ 8.4.1 Modulazione a variazione di ampiezza (ASK) Nella modulazione ASK (Amplitude Shift Keying) l’ampiezza A della portante sinusoidale di pulsazione ~p viene modulata da un segnale vm (t) che può assumere due valori, per esem- pio - 1 e 1, corrispondenti ai livelli logici 0 e 1. Pertanto l’ampiezza del segnale modulato varierà fra due valori distinti associati ai suddetti livelli logici. Questo tipo di modulazione viene più frequentemente realizzato in modo che l’am- piezza del segnale modulato assuma un valore nullo in corrispondenza del valore logico 0 (stato off) e viceversa un valore diverso da zero in corrispondenza del livello logico 1 (stato on). In questo caso la tecnica di modulazione viene più propriamente indicata Keying). Il segnale modulato può allora essere espresso analitica- mente nella forma () () cosvt v t A tmp~= [8.22] dove vm (t) vale 0 o 1. Il segnale modulante digitale illustrato in ﬁ g.  8.14a rappresenta la sequenza binaria 101101001. In ﬁ g. 8.14b è raffigurato il corrispondente segnale modulato con tecnica OOK; si noti che ciascuna cifra binaria (bit) ha una durata costante indicata con T; pertanto l’in- formazione viene trasmessa con velocità di YYT1bit s. Lo spettro di frequenza del segnale OOK dipende ovviamente dalla particolare sequen- za binaria da trasmettere. Si consideri, per esempio, un segnale modulante composto da T: il segnale modulante è quindi un’onda quadra con periodo 2T e frequenza YfT12m = . Lo spettro di frequenza è costituito da una componente fondamentale fm e da infinite armoniche, tutte dispari, di frequenza 3fm , 5fm , ... di ampiezza via via decrescente (vedi Volume 2, par. 4.1.2). Considerando solo le armoniche più significative, ossia in pratica filtrando il segnale digitale stesso con un B (banda base). Per effetto della modulazione, lo spettro di larghezza B viene traslato alla frequenza f p . In ﬁ g. 8.15 è illustrato il segnale modulato OOK con il relativo spettro. Si vede che, come nella modulazione AM analogica, ai lati della portante sono presenti le due bande laterali f p - B e fp + B: la larghezza di banda del segnale da trasmettere è quindi BT = 2B. v m(t) v(t) T (a) (b) 10 1 1 0 1 00 1 t t Modulazioni LAB 8.1 ﬁ g. 8.14 (a) Segnale modulante digitale.b) Segnale modulato con E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 317 8.4 Modulazioni digitali con portante armonica v(t) T (a) (b) 1 010 1 1 00 t ffp – Bfp + Bfp V( f ) fp T– 1 1 f p T+ fp T+ 3 fp T+ 5 2 8.4.2 Modulazione a spostamento di frequenza (FSK) Con la tecnica di modulazione FSK (Frequency Shift Keying) la portante viene trasmessa con frequenza f1 quando il segnale binario modulante vm (t) vale 1 con frequenza f0 quando vm (t) vale 0 (vedi ﬁ g. 8.16). I valori di f1 e f0 sono simmetrici rispetto alla frequenza centrale vm(t) T (a) v(t) (b) 0 1 10 t t (c) ff1 f0 fp + ∆f + B BT = 2∆f + 2B 2∆f fp fp – ∆f – B V ( f ) T 1 2 ﬁ g. 8.15 Segnale e relativo spettro di frequenza. ESERCIZI > 10-12 ﬁ g. 8.16 (a) Segnale binario.b) Segnale modulato c) Spettro di frequenza relativo al caso YfT12D e la modulante 101010... E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 318 Tecniche di trasmissione analogiche e digitali8UNITÀ fp ossia al valore nominale della frequenza portante a riposo; in particolare si ha f1 = fp - Df e f0 = fp + Df, dove Df rappresenta la deviazione di frequenza. L’indice di modulazione è Ymf BD= . A seconda delle applicazioni e del tipo di canale trasmissivo vengono scelti valori di fc e di Df differenti. Spesso f1 e f0 sono molto maggiori di 1YT, dove T è la durata di un bit. In altri sistemi, per esempio quello telefonico, f1 e f0 sono dello stesso ordine di 1YT; tipici sono i valori f1 = 1300  Hz, fp = 1700  Hz, f0 = 2100  Hz utilizzati per trasmissioni a 1200  bitYs Y()T 1 1200 s= . La determinazione dello spettro di frequenza, che dipende dalla particolare configura- zione della successione binaria e dalla larghezza di banda del segnale modulante oltre che ﬁ g. 8.16c è illustrato lo spettro relativo a un segnale binario costituito da una successione di 0 e 1 B; le frequenze f 1 e f0 sono multiple intere di 1YT e YfT12D . La larghezza di banda del segnale da trasmettere risulta approssimativamente BT = 2Df + 2B. Come si vede, al crescere di Df, la banda richiesta per la trasmissione del segnale risulta assai più ampia che nel caso della modulazione OOK (o della ASK). 8.4.3 Modulazione a spostamento di fase (PSK) Con la modulazione PSK (Phase Shift Keying) nota anche come 2PSK, il segnale modulato v (t), di ampiezza e frequenza costanti, presenta, rispetto alla portante vp (t), uno sfasamento di 180c e di 0c in corrispondenza, rispettivamente, ai valori 0 e 1 del segnale modulante vm (t) (vedi ﬁ g. 8.17). Il segnale PSK ha caratteristiche spettrali analoghe a quelle del segnale ASK (o OOK) ovvero presenta due bande laterali simmetriche rispetto alla frequenza fp della portante con una larghezza di banda BT pari al doppio di quella del segnale digitale (BT = 2B). Confrontando le tre tecniche di modulazione digitale illustrate, pur lasciando gli appro- fondimenti ai testi specifici, si può osservare che, benché tutte presentino un elevato rapporto segnaleYrumore (intrinseco alla natura binaria dell’informazione), la PSK è decisamente quella che offre le prestazioni migliori. Un inconveniente che però limita l’impiego della PSK vm(t) (a) vp(t) (b) 11010 t t v(t) (c) t ﬁ g. 8.17 (a) Segnale modulante, b) portante sinusoidale e c) segnale modulato E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 319 8.5 Modulazioni digitali con portante impulsiva vm(t) (a) vp(t) (b) 100010 t t v(t) (c) t Modulazioni polifase. Anziché associare alle due cifre binarie 1 e 0 due valori diversi di fase, per esempio 0c e 180c (oppure + 90c e -90c), i bit del segnale digitale vengono codificati, ovvero raggruppati, in parole di n bit: a ciascuna delle 2 n parole possibili è associata poi una determinata fase del segnale modulato. Nel caso della modulazione 4-PSK si associano alle coppie di bit 00, 01, 10, 11 (dibit) le fasi 0c, 90c, 180c e 270c, rispettivamente. In una forma alternativa, la 4-QPSK (Q: quadrature), le fasi associate ai dibit sono invece 45c, 135c, 225c, 315c, cioè in quadratura rispetto agli assi cartesiani. La modulazione 8-PSK permette di trasmettere 8 diversi codici a 3 bit (tribit) tramite 8 diverse fasi della sinusoide portante: così il codice 000 corrisponde alla fase 0c, il codice 001 corrisponde alla fase 45c, 010 corrisponde alla fase 90c ecc., la terna 111 corrisponde alla fase 315c. Le tecniche polifase consentono di trasmettere, per ogni stato del segnale, un numero superiore di bit e quindi di ottenere, a parità di frequenza del segnale modulato, una mag- La modulazione PSK differenziale (DPSK: Differential Phase Shift Keying) permette di superare le difficoltà e le possibili ambiguità che nascono in ricezione per rivelare il dato digitale trasmesso con le tecniche PSK. La DPSK identifica variazione della fase anziché con il suo valore assoluto. In ﬁ g. 8.18 sono illustrati i diagrammi di un segnale digitale, della portante e del segnale modu- lato DPSK. Come si vede, in corrispondenza di ciascun bit a livello 0 il segnale modulato c; i bit a 1 non introducono invece alcuna variazione di fase. Con lo stesso principio, vengono realizzate le modulazioni polifase differenziali. 8.5 Modulazioni digitali con portante impulsiva Considerando infine la modulazione digitale di una portante impulsiva, si devono citare le 8.5.1 Modulazione a impulsi codiﬁ cati (PCM) L’impiego della tecnica PCM (Pulse Code Modulation) per la trasmissione di un segnale analogico va (t) prevede che il segnale venga campionato, quantizzato e convertito in forma digitale seriale a n bit secondo un certo codice. Quest’ultimo può essere il codice binario ﬁ g. 8.18 Modulazione ESERCIZI > 13-16 E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 320 Tecniche di trasmissione analogiche e digitali8UNITÀ Va(t) (a) Vp(t) 9 010 1 100 1 011 1 5 D(t) ∆t (b) (c) (d) 01 0 1 10 0 1 01 1 1 t t t VPCM (e) 01 0 1 10 0 1 01 1 1 t VPCM t Tc T ∆t ∆t∆t puro, oppure un codice binario bipolare in modulo e segno o il codice Gray o altri ancora. Supponendo di utilizzare un codice binario puro a 4  bit per codificare i campioni Va (t) di ﬁ g.  8.19a, il segnale codificato D (t) presenterà l’andamento illustrato in ﬁ g.  8.19b: in corri- spondenza al valore campionato di 5 V si avrà il codice 0101, per il valore 9 V si avrà 1001, per il valore 7 V si avrà 0111. Il segnale D (t), tipico dei sistemi digitali, è caratterizzato dal fatto che ai valori binari 1 e 0 corrispondono, rispettivamente, i livelli di tensione alto e T, in sincronismo con un clock di frequenza 1YT. Il segnale di ﬁ g. 8.19b (del tipo cosiddetto NRZ: Non Return to Zero) non è adatto alla trasmissione per varie ragioni, fra cui le difficoltà che insorgono in ricezione per estrarre e Più adatto a essere trasmesso è il segnale V PCM di ﬁ g. 8.19d che, pur presentando la stessa sequenza di bit, è codificato nella forma RTZ (Return To Zero); in corrispondenza a un livello 1 si ha un impulso di durata inferiore a T mentre al livello 0 non è associato alcun impulso. In questo modo, una sequenza di 1 genera comunque un segnale di frequenza non YT. ﬁ g. 8.19 (a) Segnale analogico in tre istanti b) Segnale digitale c) Portante impulsiva. d) Segnale PCM unipolare (RTZ).e) Segnale PCM bipolare. E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 321 8.5 Modulazioni digitali con portante impulsiva Si noti che la generazione del segnale VPCM di fig.  8.19d può essere vista anche come il risultato della modulazione della portante impulsiva Vp (t) di frequenza 1YT mediante il segnale digitale D (t). Gli impulsi della corrente vengono trasmessi solo se coincidono con il livello 1 della modulante. In ﬁ g.  8.19e lo stesso segnale PCM è rappresentato con un codice di tipo bipolare, che fa corrispondere un impulso positivo al livello logico 1 e un impulso negativo al livello 0. Il codice bipolare garantisce la sincronizzazione fra trasmissione e ricezione anche in presenza di lunghe sequenze di 0 o di 1 ed elimina la componente continua. In definitiva comunque, ciascun gruppo di impulsi del segnale PCM corrisponde al codice binario di un campione del segnale va (t) da trasmettere. Il processo di quantizzazione introduce nel segnale PCM un certo rumore, detto appunto rumore di quantizzazione, particolarmente dannoso specie quando il livello del segnale da trasmettere è basso. Esso può essere ridotto diminuendo il passo di quantizzazione Q e quindi aumentando il numero dei livelli di quantizzazione; in questo modo però cresce il numero di impulsi Dt assegnato a ciascun gruppo di impulsi deve rimanere costante si dovranno avere impulsi di frequenza Per migliorare il rapporto segnaleYrumore di quantizzazione, rendendolo al tempo stesso costante per l’intera dinamica del segnale da trasmettere, di solito si ricorre a una in modo che l’ampiezza dei passi di quantizzazione aumenti proporzionalmente all’ampiezza del segnale stesso. Questo obiettivo viene raggiunto sostanzialmente applicando al segnale da trasmettere una compressione logaritmica realizzata con tecnica analogica (sul segnale campiona- to) oppure, assai più comunemente, con tecniche numeriche (in fase di codifica o con elaborazione numerica del segnale già codificato). Ovviamente il dispositivo ricevitore espansione logaritmica per restituire il segnale originario. I vantaggi che favoriscono l’impiego sempre più diffuso della tecnica PCM nei moder- ni sistemi di comunicazione sono numerosi: l’elevata insensibilità della trasmissione alle par. 8.7.2. 8.5.2 Modulazione Delta (DM) La modulazione Delta è un caso particolare di modulazione DPCM (Differential PCM) in cui, di un dato campione di segnale, non viene trasmesso il relativo codice bensì è codificata D rispetto al valore precedente (o ai valori precedenti). Con la tecnica DM, la variazione D è codificata con un solo bit. Naturalmente in que- sto modo si ottiene una forte riduzione del numero di bit da trasmettere. Si ha però una Q è il passo di quantizzazione e f c la frequenza di campionamento, la variazione del segnale analogico va (t) deve essere Y()vt t Qfddac1 . Un miglioramento rispetto alla tecnica DM lineare descritta è costituito dalla Modulazio- ne Delta Adattiva (ADM), in cui l’ampiezza del passo di quantizzazione Q varia, con legge definita, in funzione dei valori dei campioni precedenti del segnale va (t). Questo metodo è usato per la trasmissione di segnali vocali e offre prestazioni paragonabili a quelle della E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 322 Tecniche di trasmissione analogiche e digitali8UNITÀ 8.6 Conversione di frequenza Il principio della conversione di frequenza è fondamentale nella realizzazione di numerose up conversion) o negativa (down conversion), mantenendo inalterate le distanze fra le varie componenti e la larghezza di banda del segnale originario. Le modalità con cui viene realizzata la conversione di frequenza sono illustrate in ﬁ g. 8.20. Un dispositivo non lineare, chiamato miscelatore (mixer), compone il segnale di ingresso vs, la cui frequenza deve essere traslata, con un segnale sinusoidale v0 generato localmente, la cui frequenza f0 determina l’entità dello spostamento. Un filtro di uscita provvede a elimi- nare dal segnale ottenuto le componenti indesiderate. La caratteristica di trasferimento dell’elemento non lineare può essere rappresentata con sufficiente approssimazione da una serie di Mac Laurin del tipo vk v k viio 12 2=+ [8.23] troncata al secondo termine, in cui cioè si suppongono nulli tutti i coefficienti kn con n 2 2. Se il segnale vi è dato dalla somma dei segnali sinusoidali v0 e vs , si ha vi = v0 (t) + vs (t) = V0 cos ~0 t + Vs cos ~s t [8.24] Combinando le eq. [8.23] e [8.24] e applicando le formule di duplicazione e quelle di Wer- () ()cos cos cos cosvk V t V t k V t V tss ss01 0 0 2 0 0 2~~ ~~=+ + + = () cos coskV V k V t k V t 2 1 ss s20 22 10 0 1~~=+ + + + ()cos coskV t V t 2 1 22ss20 2 0 2~~++ + [( ) ( ) ]cos coskV V t V V tssss20 0 0 0~~ ~~++ + - [8.25] Come si vede, il segnale di uscita contiene una componente continua, componenti di fre-f 0 e fs e loro armoniche e due componenti di frequenza, rispettivamente, f0 + fs e f0 - fs . L’inserimento di opportuni filtri passa-banda consente di eliminare tutte le frequenze indesiderate e di ottenere la sola frequenza voluta f0 + fs (oppure f0 - fs). La relazione [8.25], valida per un segnale vs sinusoidale, vale ovviamente anche per segnali complessi, il cui spettro si estenda per una larghezza B da f1 a f2 (vedi ﬁ g. 8.21a). In tal caso lo spettro del segnale di uscita si presenta come in ﬁ g.  8.21b ovvero risulta traslato sull’asse delle frequenze. Si notano due bande laterali di larghezza B centrate intorno alla frequenza f0; filtrando opportunamente si può per esempio ottenere il solo segnale con banda traslata compresa fra f0 - f2 e f0 - f1 . v0(t) f0 + fs oppure f0 – fs vo(t)vs(t) f0 fs Oscillatore locale Filtro Convertitore f/f Mixer vo(t)′ ESERCIZI > 17-21 ESERCIZIO > 17 ﬁ g. 8.20 Convertitore di frequenza. E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 323 8.6 Conversione di frequenza In pratica i circuiti miscelatori utilizzano come elementi non lineari diodi, particolarmente diodi Schottky, transistori bipolari e, più spesso, mosfet, adatti anche per frequenze molto elevate; Il principio base di funzionamento del mixer descritto si riferisce naturalmente a un dispositivo ideale. Nei circuiti reali occorre valutare diversi parametri che specificano le — il guadagno di conversione ovvero il rapporto fra il segnale di uscita v o in banda traslata e il segnale vs di ingresso a frequenza fs ; — la larghezza di banda, che esprime la gamma di frequenza entro cui lo spettro del segnale di uscita vo è in relazione lineare con lo spettro del segnale di ingresso; — l’attenuazione delle frequenze spurie, che rappresenta il grado con cui le componenti di frequenza indesiderata possono essere eliminate mediante filtraggio: l’ottimizzazione di — la reiezione dei segnali di ingresso indesiderati sovrapposti al segnale v s . Mixer a moltiplicatore analogico. Il processo di miscelazione può essere realizzato in maniera più semplice utilizzando circuiti in grado di moltiplicare i due segnali applicati v0 e vs . In tal caso il segnale di uscita risulta () ()cos cos cos cosvkV t V t k VV tk VV t 22os s s s s s00 0 0 0 0~ ~ ~~ ~~== + + - [8.26] Esso contiene soltanto le componenti di frequenza f0 + fs e f0 - fs , una delle quali può essere facilmente filtrata. Questa soluzione viene per esempio sfruttata nei casi in cui l’intervallo Fra le molteplici applicazioni della conversione di frequenza, oltre alla tecnica FDM che verrà illustrata nel par.  8.7, si può ricordare la modulazione AM, in cui i due segnali che vengono forniti al mixer sono la modulante a bassa frequenza e la portante ad Sul principio della conversione di frequenza sono basate le tecniche di demodulazione coerente (o sincrona) per segnali modulati in ampiezza, frequenza e fase. In ﬁ g. 8.22 è illu- strato per esempio lo schema di principio di un demodulatore sincrono per segnali ASK o v (t) e un segnale generato localmente di frequenza f 0 uguale a quella della portante. La moltiplicazione dei due segnali, effettuata dal mixer, e l’operazione di filtraggio, che elimina la componente con frequenza 2fp , forni- scono in uscita il segnale digitale demodulato. ﬁ g. 8.21 Rappresentazio- ne degli spettri di frequenzaa) di un segnale complesso e b) dello stesso segnale traslato in frequenza. (a)(b) ff1 f0 – f2 f0 – f1 f0 + f1 f0 + f2 Vs( f ) f2 f0 B f Vo( f ) f0 B B ′ ESERCIZI > 19-21 Modulazioni LAB 8.1 FOGLI PLL: anello ad aggancio di fase NA 8.1 E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 324 Tecniche di trasmissione analogiche e digitali8UNITÀ k cosω0t (ω0 = ωp) Segnale digitale Segnali v(t) = f(t) cosωpt ASK = [ f(t) = 1 o 0] PSK = [ f(t) = ±1] Filtro passa-basso Mixer a moltiplicatore analogico ()kf t 2 Oscillatore locale f0 = fp + 455 kHz Amplificatore RF fp ± 4,5 kHz fp ± 4,5 kHz Amplificatore IF 455 ± 4,5 kHz Amplificatore BF 4,5 kHz Demodulatore Mixer Un’applicazione molto comune è costituita dal ricevitore supereterodina per segnali a radiofrequenza (RF). Lo schema di ﬁ g.  8.23 illustra il funzionamento di un ricevitore a modulazione di ampiezza. Il segnale radio modulato in ampiezza (con frequenza di por-f p e banda di 9 kHz centrata sulla portante) viene captato dall’antenna e amplificato dall’amplificatore selettivo RF a sintonia variabile, per esempio nella gamma delle onde medie (535  kHz ' 1605  kHz). L’amplificatore è accordato con l’oscillatore locale in modo che la frequenza del segnale generato da quest’ultimo disti dalla frequenza della portante p di una quantità costante, comunemente 455  kHz, cosiché risulti f0 = fp + 455  kHz. La funzione del mixer è quella di spostare lo spettro del segnale RF ricevuto in una gamma frequenze intermedie (IF); con i valori scelti, tale gamma si estende da 450 a 460 kHz. Si noti che il segnale traslato alle frequenze IF occupa 8.7 Multiplazione I principali mezzi di trasmissione (o supporti) nei sistemi di comunicazione elettrici sono i conduttori bifilari (doppini telefonici), i cavi coassiali, le fibre ottiche, lo spazio. In ogni caso canali, senza che si producano interferenze fra i segnali. ﬁ g. 8.22 Demodulatore sincrono per segnali ASK ﬁ g. 8.23 Schema di un ricevitore supereterodina per segnali RF. E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 325 8.7 Multiplazione Un esempio comune è la radiodiffusione: nel caso specifico della FM, più stazioni emet- tono i propri segnali modulati in frequenza in una gamma da 88 a 108  MHz; tutti questi Un altro esempio è il sistema telefonico in cui su un unico supporto, doppino o cavo coassiale o anche ponte radio, devono poter essere convogliate più conversazioni telefoniche 8.7.1 FDM Un metodo classico che consente di risolvere questo problema è quello di effettuare la N segnali con larghezza di banda B (segnali in banda base), appartenenti a N canali di trasmissione, vengono traslati in frequenza e combinati in un unico segnale che presenta una larghezza di banda molto B, contenente tutti gli N canali. La composizione di più segnali così ottenuta viene chiamata multiplazione a divisione di frequenza (FDM: Frequency Division Multiplexing) e si basa essenzialmente sul principio della conversione di frequenza. Volendo illustrare con maggior dettaglio il concetto di FDM, si può far riferimento alla rete telefonica ove la tecnica FDM è ancora largamente utilizzata, specie per collegamenti a B = 4 kHz (per la comunicazione vera e propria sono utilizzate le frequenze da 300 Hz a 3400 Hz), ciascun canale multiplato occuperà sul mezzo trasmissivo una banda di 4  kHz, che dovrà essere N di canali multiplabili dipenderà, in linea di principio, solo dalla capacità del mezzo trasmissivo di trasferire senza distorsioni un B T = NB = N # 4 kHz. Il processo di traslazione della banda fonica, o banda base, per ottenere N bande traslate è realizzato generalmente mediante modulazione di ampiezza di N portanti, dette anche frequenze vettrici, con tra- smissione della sola banda laterale superiore o inferiore (SSB). Lo schema di principio di ﬁ g.  8.24 illustra la multiplazione di 12 canali telefonici; i segnali di ciascun canale vengono traslati in frequenza ovvero modulati con portanti Mezzo trasmissivo Segnale multicanale FDM Can. 12 0 4 kHz fp = 64 kHz FiltroM Can. 11 04 68 kHz FiltroM Can. 10 0 60 108 112 4 72 kHz… FiltroM Can. 1 04 108 kHz FiltroM … 64 kHz DMFiltro 68 kHz DMFiltro 72 kHz… DMFiltro DMFiltro 108 kHz 04 04 04 0 4 kHz ﬁ g. 8.24 Multiplazione E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 326 Tecniche di trasmissione analogiche e digitali8UNITÀ distanziate di 4 kHz (64, 68 ..., 108 kHz). La banda del segnale trasmesso ha una larghezza T = 12 # 4  kHz = 48  kHz. In ricezione naturalmente il segnale dovrà essere demultiplato; occorrerà quindi filtrare le bande relative a ciascun canale e demodulare l’onda risultante Nel sistema telefonico le frequenze delle varie portanti sono scelte con criteri che con- sentono, attraverso modulazioni e multiplazioni successive, di multiplare da un minimo di 12 fino a 2700 e anche 10 800 canali telefonici. La gerarchia con cui vengono organizzate Occorre sottolineare che il segnale multicanali FDM è un segnale di tipo analogico e quindi sensibile alle distorsioni e alle degradazioni dovute al rumore. 8.7.2 TDM Un’altra tecnica di multiplazione, largamente impiegata per trasmettere segnali modulati ﬁ g. 8.25a illustra questo processo chiamato multiplazione a divisione di tempo (TDM: Time Division Multiplexing). I cinque segnali da trasmettere sono segnali vocali con larghezza di banda B = 3,4 kHz; il commutatore (in realtà realizzato con un dispositivo di commutazione elet- tronico) compie 8000 rotazioni al secondo in modo che ciascun canale di ingresso risulta canale di trasmissione ogni 125 ns e per un tempo massimo di nY125 5 25 s= . In ﬁ g. 8.25b è rappresentato il segnale risultante vi trasmesso. La frequenza con cui il commu- tatore campiona i vari segnali è fc = 8 kHz, il che è pienamente compatibile con il teorema del campionamento (fc H 2B). Al terminale di ricezione si dovrà avere un demultiplatore opportunamente sincronizzato che distribuisca i campioni di segnale ai canali di uscita appropriati. È questo un problema Mezzo trasmissivo (a) (b) v1 v 2 v 3 f cf c = 8000 giri/s v4 v 5 v 1 v 2 v 3 v 4 v 5 v iv i v i 1 25 μs 125 μs t 2 3 4 5 1 2 3 4 5 1 ESERCIZI > 22, 23 ﬁ g. 8.25 Multiplazione tecnica TDM. ) Schema di principio. ) Segnale risultante. E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 327 8.7 Multiplazione risolto con diverse tecniche fra cui quella di inviare periodicamente, sullo stesso mezzo La tecnica TDM qui descritta viene oggi largamente utilizzata nei sistemi di trasmissione PCM. In questo caso i segnali degli N canali di ingresso, dopo essere stati campionati sequenzialmente a intervalli regolari, vengono codificati in forma digitale n bit e convertiti in gruppi di impulsi per essere infine convogliati in un unico segnale PCM multicanale. In ﬁ g.  8.26 è illustrato un sistema di trasmissione TDM-PCM a 4 canali con i relativi segnali digitali e il segnale PCM multicanale risultante. ﬁ g. 8.26 a) Sistema di trasmissione ) Segnali sui 4 canali convertiti multicanale. Mezzo di trasmissione D/A PCM64 kbit/s M U L I P L A T O R E D M D E M U L I P L A T O R E D M Segnale PCM multicanale (a) (b) v 1 v2 v3 v4 V1 1 125 μs t 0 Can. 1 1 1 0 0 1011 D/A PCM64 kbit/s D/A PCM64 kbit/s v1 v2 v3 v4 D/A PCM A/D PCM A/D PCM A/D PCM A/D PCM 64 kbit/s 64 kbit/s 64 kbit/s 64 kbit/s 64 kbit/s V2 1 t 1 Can. 2 0 0 1 0 1100 V3 1 t 0 Can. 3 1 0 1 1 1100 V4 V4V3V2V1 V1V4 0 t t 0 Can. 4 Segnale PCM multicanale 1 1 0 0 1010 125/4 μs 125 μs E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 328 Tecniche di trasmissione analogiche e digitali8UNITÀ Se la frequenza di campionamento degli N canali è, come per i segnali fonici, fc = 8  kHz, l’intervallo di tempo disponibile per il campionamento ciclico e le operazioni di codifica frame o trama del sistema) è pari al nYf1125 sc = . Con N canali di ingresso, gli intervalli di tempo dedicati a ciascun canale (IT: intervallo di tempo di canale o time slot) avranno una durata nYN125IT s= . Si noti che, se ciascun campione di segnale è codificato con n bit, poi convertiti in n impulsi, ciascun bit sui canali di ingresso dovrà avere una durata massima di nYn125 s, mentre ciascun impulso sul canale multiplo PCM avrà una durata pari a nYNn125 s. In altri termini, le frequenze dei segnali numerici sui canali da multiplare (frequenza di cifra di canale: f ) e sulla linea multicanale (frequenza di cifre di trama: fT) saranno, rispettivamente, Y 125 10 f n bit s6= -# Y 125 10 f nN bit sT 6= -# [8.27] Nello schema di fig. 8.26, poiché ciascun segnale viene campionato con frequenza fc = 8 kHz e convertito in dati digitali a 8 bit a intervalli di 125 ns, la frequenza di cifra di canale risul- ta YY()f 8 125 10 64 kbit s 6== -# . Essendo 4 i canali da multiplare, la frequenza di cifra di trama sarà invece fT = 256 kbitYs. Il multiplatore TDM convoglia, in successione, in un frame di 125  ns, i bit relati- vi a ciascuno dei 4 canali; in questo modo ciascun intervallo di tempo di canale vale nY ,125 4 31 25IT s== durante il quale transitano 8 bit di durata 3,9  ns. Si osservi che nello schema di fig. 8.26a la multiplazione è di tipo digitale, cioè avviene sui singoli segnali PCM. Un’altra tecnica, ormai superata, prevede la generazione di segnali Riferendosi al sistema telefonico, in cui la TDM-PCM è molto usata, la trama ha, come si è detto, una durata di 125 ns e i canali multiplati sono generalmente N = 32, di cui 30 per la comunicazione vera e propria e 2 per i servizi di sincronizzazione e segnalazione (nor-= 3,9  ns. Poiché inoltre viene utilizzato un codice a 8 bit, il segnale PCM trasmesso ha una frequenza f T = 2,048  MbitYs (comunemente si parla di 2  MbitYs) e in esso sono convogliati 32 segnali numerici a 64  kbitYs. I collegamenti numerici a 2 MbitYs possono essere realizzati su cavi a coppie simmetriche (doppini), attraverso ponti radio oppure mediante inserimento in apparati di multiplazione 1,5 km ' 2,5 km; questo fatto incide sul costo dei collegamenti che vengono quindi utilizzati in ambiti piuttosto limitati. Per collegamenti a distanze superiori a 20 km vengono realizzati sistemi di trasmissione in ponte radio a 2 MbitYs modulando con tecnica OOK una portante nella banda RF compresa fra 12 e 12 GHz. La multiplazione, sempre con tecnica TDM, di più segnali PCM a 2 MbitYs consente di ottenere segnali numerici di velocità molto superiore e di sfruttare maggiormente i mezzi canali tributari) si possono convogliare su un unico mezzo di trasmissione le informazioni relative a 4 # 30 = 120 canali di ingresso (più 8 canali di servizio) con una velocità di trasmissione dell’ordine di 8 MbitYs. Con mul- tiplazioni successive si possono concentrare canali tributari di ordine superiore ottenendo I numerosi vantaggi offerti dall’impiego del sistema di comunicazione TDM-PCM invece di quello analogico in banda base o di quello FDM si possono riassumere nei seguenti punti: basso sivi, semplicità di manutenzione. A ciò si aggiunge il fatto che le prospettive e lo sviluppo in atto concernenti l’integrazione dei servizi (telefonia, trasmissione dati, telegrafia, videotelefonia) trovano nei sistemi di comunicazione digitali condizioni del tutto adeguate così come l’affermarsi E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 329 8.8 Trasmissione dati 8.8 Trasmissione dati Nella sua accezione più generale la trasmissione dati si riferisce allo scambio di informazioni in forma numerica fra sistemi di elaborazione, fra questi e i dispositivi terminali e anche Yd così come per i segnali diretti agli attuatori risulta necessaria una conversione dYa. Esempi di sistemi di trasmissione dati possono essere: il collegamento fra due computer o fra più elaboratori o In ﬁ g.  8.27 è illustrata schematicamente la struttura di un sistema di trasmissione dati. L’informazione da trasferire viene applicata al sistema di comunicazione attraverso il TX); il circuito di interfaccia seguente ha il compito di convertire l’informazione di ingresso in una forma adeguata al canale di trasmissione. Una seconda RX). La scelta del tipo di trasmissione e la definizione degli elementi del sistema stesso sono condizionate da vari fattori, fra i quali la distanza, la velocità di trasmissione richiesta, il Codice e formati. In un sistema di trasmissione dati i segnali digitali sono molto spesso codificati secondo il codice ascii (American standard code for information interchange), che usa 7  bit per rappresentare 128 caratteri comprendenti i caratteri numerici e alfabetici, i bit di parità, può essere impiegato per effettuare un par- ziale controllo della correttezza della trasmissione: il bit di parità viene posto a 1 o a 0 per Altri codici talvolta utilizzati sono il Baudot a 5  bit, il codice BCD, esteso di solito a 6 bit per rappresentare 64 caratteri, il codice EBCDIC a 8 bit (IBM), il codice Morse. Occorre precisare che di solito, indipendentemente dal codice usato e a meno di ragioni particolari che verranno in seguito esaminate, i dati da trasmettere sono, o vengono conver-formato seriale. In questo modo il numero dei conduttori richiesto per la trasmissione dei dati digitali da un terminale A a un terminale B si riduce a uno (più eventualmente uno di riferimento di massa), ovvero è sufficiente un’unica linea trasmissiva. Oltre alla trasmissione unidirezionale denominata comunemente simplex ed esemplificata in ﬁ g. 8.28, si possono avere forme di comunicazione bidirezionali. In particolare si realizzano la trasmissione half-duplex, in cui la comunicazione può avvenire in un senso e nell’altro ma non contemporaneamente e la trasmissione full-duplex, carat- ﬁ g. 8.27 Sistema di trasmissione dati. Terminale di ingresso Terminale di uscita Circuiti di interfaccia Circuiti di interfaccia Flusso dell’informazione Canale di trasmissione E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 330 Tecniche di trasmissione analogiche e digitali8UNITÀ terizzata dal fatto che le comunicazioni nei due sensi possono essere simultanee. Mentre la comunicazione half-duplex richiede solo una coppia di fili di connessione, la tecnica full-duplex necessita di due linee trasmissive. La comunicazione full-duplex con una sola linea trasmissiva (una coppia di fili) è implementabile se si adotta qualche accorgimento per distinguere e separare i segnali in trasferimento nei due sensi: per esempio si possono allocare i segnali in andata in un certo campo di frequenze e quelli in ritorno in un campo di frequenze diverso. La rappresentazione schematica di fig.  8.28 pone a confronto le diverse modalità di trasmissione fra elementi TX) e ricevitori (RX): simplex (a una via), half-duplex (a una via a senso alternato), full-duplex (a una sola via e a due vie). Controllo degli errori. Poiché durante la trasmissione i segnali subiscono inevitabilmente distorsioni di ampiezza e di fase e sono e su collegamenti a breve distanza, che però consente di rivelare solo la presenza di un cyclic redundancy code). Tipi di trasmissione. La necessità fondamentale di riconoscere, in ricezione, la sequenza dei bit che compongono ciascun carattere trasmesso e di individuare esattamente il livello asincrono o sincrono. Nel sistema asincrono i caratteri vengono trasmessi con cadenza non necessariamente regolare; durante i tempi di inattività la linea è mantenuta in stato di riposo; il trasmettitore, vedi ﬁ g.  8.29a). Il ricevitore, all’arrivo del bit di start, si predispone alla ricezione del carattere attivando un suo clock interno, che START STOP Carattere START Bit di parità t LSB L S B M S B L S B L S B M S B MSB SYN SYN 1° carattere 2° carattere 3° carattere (a) (b) TX RX Simplex TX RX Half-duplex RX TX TX RX Full-duplex a una via RX TX Full-duplex a due vie RX TX TX RX ﬁ g. 8.28 Modalità di trasmissione. ﬁ g. 8.29 Struttura dei caratteri espressi in codice ASCII trasmissione) asincrona e b) sincrona. E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 331 8.8 Trasmissione dati tempo pari almeno alla durata di uno o due bit (bit di stop), a seconda della convenzione Nella trasmissione sincrona i caratteri costituenti un messaggio vengono trasmessi, dopo essere stati raggruppati in blocchi, con cadenza continua in sincronismo con un clock con- caratteri di sincronizzazione (SYN: vedi ﬁ g. 8.29b) per permettere al ricevitore di sincroniz- zarsi o mettersi al passo con il trasmettitore. Al fine di mantenere un perfetto sincronismo Velocità di tramissione. Si è detto in precedenza che un elemento molto importante nella scelta e nella valutazione dei sistemi trasmissivi è la velocità di trasmissione che rappresenta il numero di bit di informazione che possono essere trasferiti nell’unità di tempo (bitYs). Direttamente legata a questa è la velocità di modulazione, che esprime il numero di stati significativi (di ampiezza, frequenza, fase) che può assumere il segnale in linea nell’unità di baud (Bd). In un sistema trasmissivo in cui il segnale sia di tipo binario, gli stati sono solo due, corrispondenti ai valori 0 e 1; la velocità di trasmissione può essere allora in bitYs e il suo valore coincide con la velocità espressa in baud. Questa corrispondenza non è più valida nei ,, ,45 135 225 315cc c c rispettivamente in corrispondenza dei valori binari 00, 01, 10, 11; la velocità in bitYs risulta pari al doppio della velocità espressa in baud. La velocità massima di trasmissione lungo un canale, detta anche capacità del canale (C), dipende oltre che dal sistema di codifica utilizzato anche dalle caratteristiche del canale stesso e in particolare dalla sua larghezza di banda B. Trascurando gli effetti dei rumore, la capacità in bitYs di un canale è determinata dalla relazione C = 2B log2 n [8.27] dove n è il numero di stati che può assumere il segnale in linea. Nel caso del sistema bina- rio, n = 2 e quindi C = 2B. In pratica, rumore e distorsioni di fase e frequenza limitano la velocità massima a valori inferiori a quelli teorici e impongono l’impiego di elementi ripetitori che rigenerino il segnale 8.8.1 Canali di trasmissione I canali di trasmissione utilizzati appartengono a varie tipologie che dipendono dall’appli- Il caso più semplice si riferisce allo scambio diretto di informazioni in ambito limitato, per esempio la comunicazione fra uno strumento di misura e un elaboratore o fra un elabo-Yd e l’unità di elaborazione. La comunicazione avviene su semplice cavo o su cavo schermato e sono necessari solo circuiti interfaccia che adattino le caratteristiche elettriche dei segnali digitali (in banda base) e implementino il protocollo di comunicazione ovvero le regole funzionali e la temporizza- zione del trasferimento. E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 332 Tecniche di trasmissione analogiche e digitali8UNITÀ Considerando invece la trasmissione dati in ambito più ampio e con strutture più arti- colate, per esempio il controllo remoto di un sistema di riscaldamento o il rilevamento di Le LAN (local area network) sono reti locali private, con limitato raggio di azione, che mettono in comunicazione più elaboratori, stampanti, dispositivi di memoria di massa In ﬁ g. 8.30 è rappresentato un esempio in cui si notano: il nodo concentratore (HUB) che amplifica il segnale ricevuto dai vari elementi e li instrada al destinatario; l’elaboratore centrale Server) che gestisce gli accessi alla rete e supporta servizi a cui possono accedere le stazioni collegate; le stazioni (client) e una periferica (stampante di rete) a cui possono accedere tutti i client autorizzati; il Router, uno speciale modem che gestisce l’accesso a Internet. La tecnica di trasmissione più comune è quella in banda base, con la quale i dati vengo- no trasmessi nella loro forma digitale originale; solo in certi casi si utilizza la banda larga I mezzi trasmissivi sono il doppino telefonico intrecciato (twisted pair), il cavo coassiale o la fibra ottica, con i quali si ottiene una velocità di trasmissione da 1 a 10 MbitYs e anche, in determinate condizioni, a 100  MbitYs. Le configurazioni, ossia la disposizione degli elementi che accedono alla rete, sono varie e comprendono tipologie a stella, a bus e ad anello; per ciascuna struttura sono definiti una ﬁ g. 8.30 Esempio di LAN. Stampante di rete PC client Server PC client PC client HUB Router (modem) Linea telefonica (analogica, ISDN, ADSL) PC client PC client Stampante locale E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 333 8.8 Trasmissione dati criteri e principi propri di ciascun costruttore; d’altra parte le reti più diffuse vengono di Ethernet: nata dalla collaborazione di un gruppo di imprese, si è affermata prepotentemente tanto da essere Institute of Electrical and Elec- tronics Engineers); con alcune modifiche è stato quindi definito lo standard ieee 802.3, che è attualmente il sistema LAN più diffuso. Si tratta di reti locali senza fili (wireless LAN), basate sulla comunicazione a radiofre- quenza su distanze relativamente brevi, che offrono innumerevoli vantaggi: installazione sempli- Particolare fortuna ha incontrato la tecnologia Wi-Fi (wireless fidelity): essa consente velocità di trasmissione fino a 11  MbitYs su distanze minime di 30 m che arrivano, in con- dizioni favorevoli senza ostacoli, anche a 300  m; la potenza di emissione è ridottissima, access point), in base alla potenza del segnale disponibile, sia della banda di frequenza meno occupata. Rappresenta una tecnologia di collegamento senza fili (networking wireless) a bassa potenza per il trasferimento di dati, immagini, voce con la capacità di interagire con 2,46 GHz, e consente una velocità massima di 1 MbitYs. Bluetooth cerca i dispositivi coperti dal segnale entro un raggio di qualche decina di metri e li mette in comunicazione tra loro. wireless personal area network) o Piconet. WAN. I collegamenti di tipo wan (wide area network) riguardano la comunicazione su aree estese, nazionali e internazionali. La soluzione più classica consiste nell’utilizzo della rete telefonica pubblica a frequen- za vocale che consente, grazie alla sua diffusione capillare, di estendere la trasmissione a un’utenza comunque distribuita. I dati digitali devono essere trasformati in modo da essere compatibili con le linee telefoniche convenzionali previste per trattare segnali analogici con banda compresa fra 300 e 3400 Hz. Ciò richiede un dispositivo modulatore in trasmissione e modem). Questa soluzione, in cui le linee telefoniche vengono condivise (mediante commutazione dei collegamenti) fra il normale servizio di comunicazione rete commutata. Essa offre prestazioni limitate che ne hanno di fatto determinato l’abbandono: consente solo basse velocità di trasmissione; presenta un elevato tasso di errore a causa del rilevante rumore sul canale e delle distorsioni che si instaurano, fattori che invece hanno scarsa rilevanza per le comunicazioni foniche; infine, la commutazione e l’attivazione del collegamento richiedono Una parziale soluzione agli inconvenienti citati si ha con le reti dedicate, cioè reti destinate a una determinata utenza, per esempio una banca o una società. Le reti dedicate possono utilizzare niente principale è di costituire un sistema chiuso non consentendo il collegamento con terminali esterni alla rete prevista. Per contro, rispetto alla rete commutata, la velocità di trasmissione è più elevata, la connessione è immediata e stabile, il tasso di errore è ridotto. Particolare importanza collegamenti diretti numerici (CDN). Essi consentono velocità di trasmissione di 64 kbitYs con la multiplazione a divisione di tempo di canali operanti a velocità inferiori. Con il progresso incalzante dell’Informatica e delle Telecomunicazioni, in particolare con lo sfruttamento delle tecniche digitali, sono state sviluppate varie altre tipologie di rete. E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 334 Tecniche di trasmissione analogiche e digitali8UNITÀ La rete isdn (integrated service digital network) è una rete completamente digitale com- mutata che applica la tecnica numerica presso l’utente; sfruttando lo stesso doppino telefo- nico usato nella telefonia tradizionale, permette di trasmettere a 128 kbitYs dati, immagini, voce e integra altri servizi come, per esempio, il trasferimento di chiamata o il fax. La rete adsl (asymmetric digital subscriver line), con le sue varianti, è attualmente la rete più diffusa per la connessione a Internet consentendo il trasferimento contemporaneo downstream) e una velocità inferiore dall’utente alla rete (upstream). Utilizza uno speciale modem adsl e il normale doppino telefonico per il tratto di connessione utente-centrale; da qui il segnale provider che fornisce i servizi Internet. 8.8.2 Circuiti di interfaccia I circuiti di interfaccia possono essere di vario tipo e presentare complessità molto diverse Se i dati da trasferire sono, come avviene frequentemente nei sistemi digitali, in formato parallelo, l’interfaccia dovrà comprendere un convertitore parallelo-serie per consentire la Con l’aumentare della distanza dei dispositivi collegati, si incontrano difficoltà a causa di problemi elettrici (loop di terra, attenuazioni, interferenze e rumore) e difficoltà di tem- porizzazione dovute ai ritardi di propagazione: le interfacce potranno essere provviste di line-driver e line-receiver che riducano questi inconvenienti. Nei sistemi di trasmissione a media e lunga distanza è spesso necessario trattare il segnale con qualche forma di modulazione. Gli organi di interfaccia agli estremi del canale dovranno Infine i circuiti di interfaccia devono svolgere funzioni di controllo e di temporizzazione dello scambio dei dati, ovvero gestire il protocollo di comunicazione, oltre a provvedere La necessità di trasferire informazioni fra apparecchiature digitali diverse, prodotte da varie case costruttrici, per esempio fra computer e periferiche, ha determinato l’esigenza di norma-interfacce standard raccomandate dalle industrie del settore elettronico e riconosciute e accettate dai comitati internazionali. La definizione di un’interfaccia implica la determinazione di tutta una serie di caratteri- stiche meccaniche (connettori, cavi), elettriche (livelli dei segnali, impedenze) e funzionali 8.9 Interfacce seriali Il trasferimento seriale dei dati offre il considerevole vantaggio di richiedere un ridotto numero di linee di collegamento. A ciò si aggiunge il fatto che la tecnologia attuale rende Le interfacce parallele, benché consentano velocità superiori, trovano scarso impiego se non in situazioni particolari, per esempio nei sistemi di misura automatici, quando si di questo standard e del relativo protocollo di comunicazione è contenuta nella NA  8.2 trasferimento Utilizza un ridotto numero di linee di collegamento e componenti integrati con pochi terminali. Lo scambio dei dati avviene secondo Interfacce NA 8.2 E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 335 8.9 Interfacce seriali Per l’interfacciamento e lo scambio dei dati seriali sono stati sviluppati numerosi proto- colli, a cui le case costruttrici si attengono e che sono diventati, di fatto, standard di comuni-controller area network) e il lin-bus (local interconnect network). Infine, per il trasferimento dati in piccoli sistemi vengono largamente utilizzati i protocolli spi e i 2c, agili ed efficienti. 8.9.1 Protocollo RS-232 L’interfaccia eia RS-232 (electronic industries association recommended standard) definisce le connessioni fra un dispositivo terminale dte (data terminal equipment) e un dispositivo di comunicazione dce (data communication equipment) destinato alla trasmissione di dati in formato seriale, con modalità di scambio sincrono o asincrono. Questa interfaccia, che è stata sostanzialmente accettata anche dal comitato internaziona- le itu (international telecommunication union), è nata per il collegamento di apparecchiature remote attraverso la rete telefonica. Essa prevede quindi tutti i segnali e le linee di controllo attraverso modem in diverse configurazioni, fra cui simplex, half duplex, full duplex, sia su un unico canale trasmissivo sia su un canale primario e uno secondario. Allo standard originale eia RS-232-C definito nel 1969, sono seguite altre versioni fra cui l’ultima, nota Ytia RS-232-F (tia: telecommunication industry association). In forme semplificate, l’interfaccia RS-232 è largamente usata anche per il collegamento non remoto fra pc e anche fra pc e dispositivi periferici: in tal caso il modem è superfluo, il collegamento è diretto e molte delle linee previste dallo standard non sono presenti oppure vengono ignorate o tenute fisse a livello alto o basso. Nel campo dell’acquisizione dati è particolarmente interessante l’uso dell’interfaccia RS-232 in modalità asincrona nella sua forma più semplice, che richiede solo tre linee: RX, TX, GND. Formato dei dati. I caratteri, costituiti da 5, 6, 7 o 8 bit a seconda della scelta effettuata, vengono trasmessi con cadenza non necessariamente regolare. Durante i tempi di inattivi- tà, la linea è mantenuta in stato di riposo. Il trasmettitore, prima di inviare il primo bit di ciascun carattere, deve portare la linea in stato di lavoro: questa commutazione costituisce ﬁ g. 8.31). Il ricevitore, all’arrivo del bit di start, si predispone alla ricezione del carattere, a partire dal bit meno significativo (lsb), attivando il suo clock interno, che deve avere una frequenza uguale a quella del trasmettitore; si noti che è sufficiente che il clock mantenga il sincronismo solo per la durata del carattere. Trasmesso l’ultimo bit, il trasmettitore riporta la linea in stato di riposo e così la mantiene per un tempo pari almeno alla durata di uno o due bit (bit di stop), a seconda della convenzione adottata. Dopo la segnalazione di stop, se non vi sono altri caratteri da trasmettere, la linea rimane in stato di riposo, altrimenti viene emesso un nuovo bit di start e così di seguito. START STOP Carattere START Bit di parità t LSB MSB ESERCIZI > 24-26 ﬁ g. 8.31 Struttura dei caratteri nella trasmissione asincrona. E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 336 Tecniche di trasmissione analogiche e digitali8UNITÀ Si noti la presenza di un bit di parità: l’inserimento di questo bit, che è opzionale, costituisce una forma molto semplice e parziale di controllo degli errori: il bit di parità viene posto a 1 o a 0 per rendere pari (oppure dispari se si è scelta la convenzione di parità dispari) il numero dei bit a 1 presenti nel carattere e viene inviato insieme al carattere stesso. In ricezione, viene controllato il numero totale dei bit a 1 e, se questo risulta dispari (o pari), viene segnalato un errore di trasmissione. La velocità di trasmissione si esprime in baud che, in questo caso, corrisponde anche alla velocità espressa in bitYs. Il protocollo prevede velocità di trasmissione (baud rate) normalizzate, da 300, 600, 1200, 2400, …, 19 200 baud e oltre; la velocità effettiva che può essere usata dipende da vari fattori, tra cui la distanza fra trasmettitore e ricevitore e le caratteristiche elettriche dei circuiti. Connettore e linee. Lo standard RS-232, adatto per velocità di trasmissione fino a 20 kbitYs su distanze fino a circa 15 m, prevede per il collegamento elettrico un cavo con più linee e due connettori (maschio-femmina) a 25 contatti (DB25). Ciascuna linea costituisce un dedicato a una ben precisa funzione ovvero al trasferimento di un segnale dal dte al dce o viceversa. Nella forma semplificata il connettore a 25 pin è spesso sostituito dal connettore a 9 contatti (DB9) illustrato in ﬁ g.  8.32 e solitamente disponibile sui personal computer e sui dispositivi periferici come porta seriale. In tab. 8.2 sono riportati le numerazioni dei contatti (per i connettori DB9 e DB25), le sigle identificative, la descri- Il protocollo di comunicazione, molto articolato, si basa sull’attivazione di alcune linee da parte del dte e sulla corrispondente attivazione, in risposta, di altre linee da parte del dce; una volta avviata la comunicazione, i dati vengono trasferiti, con il formato illustrato in fig. 8.31, sulle linee TXD e RXD. 12 3 45 67 8 9 RI RXD TXD GND DSR RTS CTS DTRCD tab. 8.2 Linee di interfreccia nei connettori RS-232. Pin DB9 Sigla Circuiti di interfaccia Verso DTE DCE Pin DB25 5 GND Signal Ground 7 3 TXD Transmitted Data \" 2 2 RXD Received Data ! 3 7 RTS Request to Send \" 4 8 CTS Clear to Send ! 5 6 DSR Data Set Ready ! 6 4 DTR Data Terminal Ready \" 20 9 RI Ring Indicator ! 22 1 CD Carrier Detector ! 8 ﬁ g. 8.32 Connettore RS-232 a 9 contatti. E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 337 8.9 Interfacce seriali Collegamento Null Modem. Particolarmente interessante e utile è l’uso dell’interfaccia seriale per effettuare trasferimenti di dati fra due apparecchiature dte, in particolare due personal computer. Occorre in questo caso «incrociare» le linee di trasmissione e ricezione dei due dispositivi e collegare opportunamente le linee di controllo cosicché venga rispet- tato il protocollo di comunicazione. In ﬁ g.  8.33 sono illustrati i collegamenti per realizzare la funzione null modem in modo completo mediante due connettori DB9. Il collegamento null modem può essere adattato anche in applicazioni in cui un pc debba comunicare con un circuito periferico in grado di inviare e ricevere dati ma privo di ogni linea di controllo. Si può predisporre un connettore idoneo che consenta di gestire automa- ticamente il protocollo di comunicazione. In ﬁ g. 8.34 è illustrato lo schema che consente di realizzare il trasferimento seriale bidirezionale su tre fili. Caratteristiche elettriche. I valori di tensione sui circuiti di interfaccia sono associati ai livelli logici secondo il criterio della logica negativa. Il livello logico 1 corrisponde a una tensione VI inferiore a -3 V mentre lo 0 logico corrisponde a una tensione VI maggiore di +3 V; la regione fra -3 e +3 V è considerata di transizione e in essa lo stato del segnale non è definito. Le fasce di valori associate ai livelli 0 e 1 possono estendersi, rispettivamente, fino a +15 e -15 V. Relativamente ai dati, lo stato logico 1 è indicato come mark e lo stato 0 come space. Per quanto riguarda i segnali di temporizzazione e di controllo, essi sono considerati attivi V I 2 3  V; sono invece considerati inattivi (off) quando il livello logico è 1. Le caratteristiche elettriche specificate dallo standard riguardano, oltre al valore di VI, anche il valore di alcuni parametri della linea di interfaccia evidenziati nel circuito equiva- ﬁ g.  8.35: resistenza Ro e capacità Co associate ai terminali di uscita del dispositivo Driver ReceiverCircuito di interfaccia Linea di massa Ro Vo RL EL Co CLVI 2 RXD TXD DSR CD RTS CTS GND RXD DTE1 DTE2 TXD 2 ﬁ g. 8.33 Connessione null modem fra due dte dotati di connettore DB9. 2 RXD TXD DSR CD RTS CTS GND Dispositivo periferico DTE ﬁ g. 8.34 Connettore adattato per la comunicazione seriale su 3 fili. ﬁ g. 8.35 Circuito equivalente RS-232. E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 338 Tecniche di trasmissione analogiche e digitali8UNITÀ driver che pilota il circuito di interfaccia; resistenza RL che costituisce il carico del driver; capacità CL comprendente sia la capacità della linea sia la capacità di ingresso del ricevi- tore (receiver); tensioni massime, a circuito aperto, del driver (Vo) e del receiver (EL). Altri parametri si riferiscono alla velocità di commutazione dei segnali sulla linea. In commercio è disponibile un’ampia scelta di circuiti integrati adattatori, detti line driver, che convertono i segnali ttl e cmos in segnali conformi allo standard RS-232. Per consentire l’adattamento opposto, si utilizzano invece circuiti line receiver, che convertono segnali RS-232 in segnali ttl o cmos. Fra i più comuni integrati si possono ricordare i classici SN75188 (driver), SN75189 (receiver), SN75185 (3 driver e 5 receiver) e, in particolare, il MAX232 e il MAX237 che richiedono solo un’alimentazione VCC = 5 V. Caratteristiche migliorative e prestazioni superiori allo RS-232 sono offerte dalle inter- facce RS-422, RS-423, RS-449 e RS-485. Per la descrizione e gli approfondimenti si rimanda alla NA 8.2 disponibile sul DVD. Per l’implementazione di interfacce seriali vengono prodotti numerosi circuiti integrati programmabili, che svolgono le funzioni di controllo e comunicazione richiesti nelle varie applicazioni. Gestiscono la comunicazione asincrona i dispositivi uart (universal asyncronous receiver transmitter) svolgendo diverse funzioni: — provvedono allo scambio di dati in formato parallelo con un dte (p. es. un microproces- sore) regolando con opportune segnalazioni la sequenzialità dello scambio; — convertono in forma seriale i dati forniti dal dte e, dopo aver generato i bit di start, di parità e di stop, li trasmettono serialmente al dce (un modem o un circuito remoto) con la velocità prescelta; — ricevono i dati seriali provenienti dal dce e li convertono in forma parallela effettuando anche controlli sulla correttezza e segnalando eventuali errori; — consentono di programmare alcune modalità e caratteristiche della comunicazione come numero di bit del carattere, baud rate, parità, bit di stop. Altri dispositivi, noti come usart (universal syncronous asyncronous receiver transmitter), sono più completi e, oltre a funzionare in modo analogo ai circuiti uart, consentono la comunicazione sincrona condividendo il segnale di clock con il dce. Si noti che i livelli e le caratteristiche elettriche dei dispositivi citati sono generalmente ttl compatibili: occorre quindi inserire gli opportuni adattatori sulle linee seriali per otte- nere i livelli RS-232. 8.9.2 Protocollo spi L’interfaccia spi (serial peripheral interface) è un bus di comunicazione ideato dalla Motorola. Essa consente la comunicazione seriale, sincrona, full-duplex fra un dispositivo, che funziona master e avvia la comunicazione, e uno o più dispositivi slave ( ﬁ g. 8.36). Il bus prevede 4 linee convenzionalmente denominate come indicato in tab.  8.3. Il segnale SCLK è il clock seriale che scandisce gli istanti di emissione e di lettura dei bit sulle linee di dato. La linea SS, attiva bassa, è dedicata all’abilitazione del dispositivo slave da parte del master, che seleziona così lo slave da attivare. I dispositivi slave devono essere dotati di uscite tri-state e, quando sono disabilitati, devono mantenere l’uscita in alta impedenza ed essere quindi isolati dal bus, indifferentemente dalla presenza del segnale di clock. Il numero di slave che si possono connettere al bus è limitato esclusivamente dal numero di possibili linee di abilitazione che il master può gestire. MOSI è la linea attraverso cui il master trasmette il dato seriale allo slave mentre, con la stessa cadenza, lo slave invia il suo dato sulla linea MISO. La frequenza di clock, e di conseguenza la velocità di trasferimento sul bus (baud rate), può raggiungere livelli anche elevati, nell’ordine delle decine di MHz e anche oltre. Di solito il dato trasmesso è costituito da 8 bit (o anche 16 bit) e viene emesso per primo il bit più significativo (msb). I livelli elettrici non sono definiti e dipendono quindi dalla compatibilità fra master e slave. FOGLI Interfacce NA 8.2 E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 339 8.9 Interfacce seriali SCLK MOSI SS1 SCLK SS2 SS3 Master SPI Slave SPI SCLK Slave SPI SCLK Slave SPI tab. 8.3 Denominazione Descrizione Direzione Denominazioni alternative SCLK Serial Clock dal Master allo Slave SCK SS Slave Select (attiva bassa) dal Master allo Slave CS Synco MOSI Master Output, Slave Input dal Master allo Slave DI, SI MISO Master Input, Slave Output dallo Slave al Master DO, SO L’interfaccia prevede alcuni registri: — Registro dati (SPIDR), costituito da un registro a scorrimento a 8 bit, in cui transitano i bit dei dati, pilotato da un oscillatore interno (baud rate generator), come illustrato in ﬁ g. 8.37. — Registri di controllo (SPICR1 e SPICR2) che consentono, per esempio, di definire il sincronismo fra le commutazioni sulla linea dati e il clock, impostando la polarità (bit ) e la fase (bit CPHA) di quest’ultimo; si definisce così lo stato inattivo (idle) del clock, il fronte che provoca la commutazione dei dati e l’istante in cui i dati sono validi e possono essere letti; queste opzioni, selezionabili dal master, permettono di adattare l’interfaccia a tutte le possibili varianti previste dai dispositivi slave, che normalmente invece vengono progettati per avere solo uno dei 4 modi di comunicazione possibili. I diagrammi di ﬁ g.  8.38 rappresentano il modo di funzionamento in cui CPOL = 0 e CPHA = 0 (modo 0): nello stato inattivo si ha SCLK = 0, i dati cambiano in corrispon- denza del fronte di discesa del clock e sono validi con il fronte di salita. — Registro (SPIBR) per impostare la velocità di trasferimento dei dati in relazione alla frequenza del clock di sistema al fine di rispettare le specifiche dinamiche dello slave. — Registro di stato (SPISR), i cui bit indicano, per esempio, se è pronto un dato da tra- smettere o se è stato ricevuto un dato. MISO V DD MISO SCLK Shift Register Master SPI Slave SPI Shift Register Baud Rate Generator SS SS ﬁ g. 8.36 Connessione tipica di un elemento master e tre slave con ﬁ g. 8.37 Connessione e slave con E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 340 Tecniche di trasmissione analogiche e digitali8UNITÀ Il diagramma di fig.  8.38a mostra, a titolo di esempio, il trasferimento di due byte da un dispositivo master a uno slave, costituito in questo caso da un convertitore dYa a 8  bit. Il primo byte contiene informazioni di controllo per il dac mentre il secondo contiene il dato vero e proprio da convertire. Sulla linea MOSI viene posto il primo bit da trasmettere quando ancora SCLK e SS sono inattivi. Dopo la selezione dello slave (SS = L), viene attivato SCLK per 8 cicli, durante i quali i bit si presentano in sequenza e vengono letti in corrispondenza dei fronti positivi di SCLK. Dopo un intervallo di durata arbitraria, inizia l’invio del secondo byte; la trasmissione si conclude disattivando SS e SCLK. In fig.  8.38b lo stesso trasferimento è eseguito in modo continuativo: si vede che SCLK può essere sempre attivo e il trasferimento di tutti i 16 bit è controllato solo dal segnale SS. microwire. L’interfaccia microwire, sviluppata in tempi precedenti dalla National Semi- conductor, presenta caratteristiche simili alla spi e trova ancora frequenti applicazioni specie per la comunicazione fra un solo master e un solo slave. Il protocollo è più semplice ma assai meno rigoroso e flessibile: per esempio, la denominazione delle linee (SCK, CS e SI, SO, usate sia per il master sia per lo slave) è alquanto ambigua; la sincronizzazione fra i fronti di SCK e le commutazioni sulle linee dati è fissa e non programmabile. 8.9.3 Protocollo i 2c L’interfaccia i 2c (iic: inter integrated circuit) è un bus di comunicazione, ideato dalla Philips- Signetics, che consente la comunicazione seriale, sincrona, half-duplex fra due o più dispositivi ﬁ g. 8.39) utilizzando solo due linee bidirezionali: — SCL: clock seriale per la sincronizzazione della comunicazione; — SDA: linea dati per il trasferimento seriale dell’informazione fra i vari dispositivi collegati. Entrambe le linee sono collegate all’alimentazione positiva mediante un resistore di pull-up: quando il bus è inutilizzato entrambe sono a livello alto. Gli stadi di uscita dei circuiti col- MSB DATO1 (8 bit) DATO (16 bit) DATO2 (8 bit) SCLK MOSI MOSI LSB LSBMSB DB8DB15 DB7 DB0 MSB LSB DB0DB15 SS(a) (b) SS ﬁ g. 8.38 Trasferimento con protocollo a) invio di 2 # 8 bit; (b) invio di 16 bit in sequenza. Convertitore AYD seriale LAB 7.5 FOGLI ESERCIZI > 27-29 E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 341 8.9 Interfacce seriali Master I 2C SCL VDD Rpull-up R1 R2 SDA Slave I2C Slave I2C Slave I2C legati hanno struttura open-collector (od open-drain se si tratta di cmos) così da permettere la connessione wired-and. Il livello logico 0 corrisponde a 0 V ossia a GND mentre per il livello logico 1 il valore di tensione dipende dalle caratteristiche tecnologiche dei circuiti connessi, in particolare dall’alimentazione utilizzata. La comunicazione è gestita secondo un efficace protocollo che, oltre a evitare conflitti fra i dispositivi collegati, con conseguente perdita di informazioni, consente anche di collegare circuiti con differenti frequenze di lavoro. Fra i dispositivi collegati al bus esiste sempre una relazione master-slave, in cui sia il master sia lo slave possono funzionare come trasmettitori o ricevitori. Il master è l’elemento che inizia la comunicazione e genera il segnale di clock per il trasferimento dell’informazione; a quel punto, i circuiti selezionati funzionano come slave. Ciascun dispositivo collegato è selezionabile via software mediante un indirizzo. Il trasfe- rimento di dati a 8 bit può avvenire, a seconda delle caratteristiche dei circuiti, a 100 kbitYs nella modalità standard, a 400 kbitYs in fast-mode, a 1 MbitYs in fast-mode plus oppure fino a 3,4 MbitYs nel modo high-speed. Normalmente i dati sulla linea SDA devono rimanere stabili per tutto il tempo in cui il clock SCL è alto e possono cambiare solo quando SCL è basso. Si definiscono però le particolari condizioni di start e stop illustrate in ﬁ g. 8.40: — una transizione negativa (H \" L) di SDA mentre SCL è alto indica una condizione di start; — una transizione positiva (L \" H) di SDA mentre SCL è alto indica una condizione di stop. SDA SCL SDA SCL START STOP SP ﬁ g. 8.39 Connessione 2c di 4 dispositivi open-drain. ﬁ g. 8.40 Condizioni di start e stop. E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 342 Tecniche di trasmissione analogiche e digitali8UNITÀ START S 12 8 9 Linea dati pilotata dal trasmettitore Linea dati pilotata dal ricevitore Not acknowledge Acknowledge Impulso di clock per la segnalazione ACK SCL dal master Le condizioni di start e stop sono sempre generate dal dispositivo master; dopo lo start il bus è considerato occupato (busy) fino alla segnalazione di stop. I dati sono composti da 8 bit e viene trasmesso per primo il bit più significativo (msb). Il numero di dati che possono essere trasmessi in sequenza è teoricamente illimitato. In risposta a ciascun byte inviato, il ricevitore deve generare un bit di acknowledge a conferma della ricezione. La segnalazione di acknowledge (ACK) consiste in un bit a livello basso, generato sulla linea SDA dal dispositivo ricevitore (vedi «Linea dati pilotata dal ricevitore» in ﬁ g.  8.41), in sincronismo con un impulso di clock generato dal master mentre il trasmettitore lascia SDA. Generalmente il ricevitore che è stato selezionato deve obbligatoriamente inviare il bit di acknowledge dopo ciascun byte ricevuto. Se un elemento che lavora come slave non invia l’impulso di acknowledge, perché non selezionato o occupato per operazioni interne o altro, SDA; in questo caso il master può generare una condizione di stop per interrompere il trasferimento oppure riprendere generando una nuova condizione di start. Se dopo il trasferimento di un byte il dispositivo slave non può ricevere o trasmettere un altro byte di dati, può mantenere bassa la linea di clock SCL forzando così il master in uno stato di attesa (wait); il trasferimento proseguirà successivamente quando lo slave rilascerà la linea SCL. Il bus i 2c consente il collegamento di più elementi master, in grado di iniziare un trasferi- mento, generare il segnale di clock e terminare il trasferimento. Tuttavia, per evitare conflitti e alterazione di dati, è necessario che un solo master per volta abbia il controllo del bus. La arbitraggio) si basa sul fatto che un dispositivo non può controllare il bus se un altro elemento ha già generato una condizione di start; deve invece rimanere in attesa fino a quando il master che detiene il controllo non abbia generato una condizione di stop. La struttura wired-and delle connessioni sulle SDA e SCL garantisce questa funzione. Ciascun dispositivo connesso al bus i 2c è associato a un indirizzo che, nel modo standard, si compone di 7 bit; solitamente questo comprende una parte fissa, per esempio 4 bit, che identifica il tipo di dispositivo, e una parte programmabile, i restanti 3 bit, che consente di indirizzare uno di otto dispositivi dello stesso tipo presenti nel sistema. Il byte dell’indirizzo si completa con un ottavo bit ( YRW) che indica se il master inizia un’operazione di lettura ( YRW 1= ) oppure di scrittura ( YRW 0= ) ossia, in altri termini, se il master lavora come ricevitore o come trasmettitore. In ﬁ g.  8.42 è illustrato il diagramma relativo alla lettura di un adc a 8 bit con indirizzo 0110100; esso evidenzia la correlazione fra il segnale SCL e il segnale SDA quando quest’ul- timo è pilotato dal master (p. es. un n-controllore) e quando è pilotato dallo slave (adc). Subito dopo aver generato la condizione di start il master invia l’indirizzo; nel successivo ciclo di clock (il nono) il dispositivo slave indirizzato risponde con un bit di acknowledge. A questo punto, può aver luogo il trasferimento del dato vero e proprio: il trasmettitore invia HEX) e il master invia la condizione di stop. ﬁ g. 8.41 Acknowledge. E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 343 8.9 Interfacce seriali Si noti che, nei modi di funzionamento fast e high speed, l’indirizzo può essere a 10 bit. Inoltre, la gestione di adc o dac, con risoluzione superiore a 8 bit ed eventualmente con più canali analogici, comporta un colloquio fra master e slave assai più complesso in quanto occorre quasi sempre inviare al convertitore uno o più byte di controllo e impostazione; i fogli tecnici forniscono comunque precise indicazioni specifiche. L’interfaccia spi è molto usata e presenta vantaggi rispetto ad altri protocolli seriali per il fatto di consentire la comunicazione full-duplex e, soprattutto, per l’elevata velocità di trasmissione, la semplicità dell’hardware richiesto per il collegamento, l’estrema flessibilità del protocollo, che può essere adattato a diversi dispositivi. Si può tuttavia osservare che richiede almeno 3 o 4 linee di connessione, non effettua un reale controllo del flusso dei dati e non prevede alcuna forma di conferma dell’avvenuta ricezione acknowledge) dei dati stessi. È quindi particolarmente adatta per collegare un solo master e un solo slave quando si abbiano esigenze di elevata velocità. L’interfaccia i 2c è più complessa e meno flessibile della spi ma richiede solo 2 linee di collegamento, prevede una segnalazione di conferma della ricezione e consente una gestione efficiente di sistemi multi-slave e multi-master, grazie alla possibilità di indirizzamento via software. Tuttavia, la comunicazione è solo half-duplex e offre velocità decisamente inferiori a quelle della spi. Anche per quanto riguarda l’immunità al rumore l’interfaccia i 2c, sensibile ai livelli, risulta meno affidabile della spi, sensibile invece ai fronti di commutazione dei segnali. 8.9.4 USB L’interfaccia usb (universal serial bus) ha assunto grandissima diffusione negli ultimi anni specialmente per il collegamento di periferiche ai personal computer e in molti casi ha sosti- — permette di connettere a ciascuna porta usb fino a 127 dispositivi periferici, tra cui unità cd- rom, joystick, tastiere, mouse, scanner, macchine fotografiche digitali, altoparlanti, telefoni; — supporta l’installazione Plug-and-Play, con la quale il computer rileva e configura auto- maticamente le periferiche e ne installa i programmi driver appropriati; — consente di collegare, ed eventualmente rimuovere, nuovi dispositivi in modo rapido, senza dover arrestare o riavviare il computer (hot plugYswap); — è in grado di fornire fino a 500  mA ai dispositivi collegati, che possono quindi in certi casi essere alimentati direttamente attraverso il bus usb; — è ormai accettata come standard da tutti i costruttori di computer e di periferiche ed è semplice e poco costosa.LetturaSTARTSTOP SCL pilotata dal master Indirizzo dello slave Dato convertito AB (Hex) SDA pilotata dal master SDA pilotata dallo slave 1 101100 0 MSB ACK NOT LSB 0 10 1 0 1 1 H HHR/W=1 H ﬁ g. 8.42 Lettura di un adc con 2c. E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 344 Tecniche di trasmissione analogiche e digitali8UNITÀ Essendo un’interfaccia recente, versatile e con grandi potenzialità, le sue caratteristiche e le sue prestazioni sono in fase di evoluzione e subiscono frequenti aggiornamenti: oltre alla versione USB basic speed), sono disponibili la versione usb 2.0 (USB high-speed), la versione super-speed 3.0 ed è stata sviluppata appositamente per i telefoni cellulari la usb otg (on the go). Bisogna inoltre osservare che in commercio sono disponibili speciali adattatori USBYRS-232, corredati del relativo software, che consentono sia di utilizzare le numerose apparecchiature esistenti con interfaccia RS-232, sia di sfruttare circuiti e programmi svi- Un sistema con interfaccia USB è strutturato secondo una configurazione gerarchica a stella ( ﬁ g. 8.43) e si compone di diversi elementi: — un’unità centrale di controllo, in genere un computer, denominato Host; essa contiene la porta usb con il nodo principale (Root Hub), da cui si diparte una connessione; — le funzioni, ossia le unità periferiche usb connesse, per esempio un mouse, un joystick, una stampante; — uno o più nodi (Hub) che costituiscono ciascuno il centro di una stella e consentono di collegare più dispositivi periferici. Trasferimento dati. L’interfaccia usb consente velocità di trasmissione considerevoli (1,5  MbitYs nel modo low speed, 12  MbitYs nel modo full speed e 480 MbitYs nel modo high speed) utilizzando solo quattro linee adeguatamente schermate. I dati sono trasferiti in forma seriale su due linee differenziali intrecciate (twisted pair) e sono modulati in banda base con una codifica NRZI (non return to zero inverted); il trasferimento fra l’Host e i dispositivi periferici è temporizzato mediante l’invio di appositi caratteri di sincronizzazione. — Bulk: usato per periferiche caratterizzate da grandi quantità di dati da trasferire, per esempio stampanti o scanner, per le quali comunque il trasferimento può essere differito — Control: usato dal software di controllo dell’Host per comunicazioni di servizio, per esempio per inviare comandi o rilevare lo stato dei dispositivi periferici; — Interrupt: usato per la ricezione di dati forniti da dispositivi che sporadicamente e irre- golarmente inviano modeste quantità di dati, per esempio la tastiera o il mouse; — Isocronous: usato nei casi in cui il flusso di dati è continuo e regolare e in cui la rela- zione temporale deve essere mantenuta, per esempio in applicazioni in real-time o nel trasferimento di informazioni audio o video. Ulteriori informazioni sono forniti nella NA 8.2 disponibile sul DVD. Root Hub Host Hub 1 Hub 2 Livello 1 Livello 2 Livello 3 Livello 4 Periferica Periferica Periferica Periferica Periferica Periferica Periferica Hub 4Hub 3 Interfacce NA 8.2 ﬁ g. 8.43 Configurazione usb. E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 345 8UNITÀSummary Sommario  Un sistema di trasmissione comprende un trasmettitore, un mezzo trasmissivo o canale, un ricevitore.  Nel processo di modulazione il segnale modulante, che contiene l’informazione, modifica uno o più parametri portante; il segnale modulato viene tra- smesso e in ricezione viene demodulato.  Nelle modulazioni analogiche con portante sinusoidale, la modulante è un segnale analogico di ampiezza Vm e frequenza fm compresa in una determinata banda B; la portante è un segnale sinusoidale di ampiezza A e frequenza fp (con 2 B2fp ). Esse comprendono: — AM: modulazione di ampiezza. La modulante modifica l’ampiezza della portante. Si definisce m = k aVmYA. — FM: modulazione di frequenza. La modulante modi- fica la frequenza della portante. Si definiscono la deviazione di frequenza Yfk V 2fm rD = e l’indice di modulazione mf = D f Yfm. — PM: modulazione di fase. La modulante modifica la fase istantanea della portante. Si definiscono la Di = k pVm e la massima devia- zione di frequenza Di fm che subisce la portante quando viene modulata in PM.  Nelle modulazioni analogiche con portante digitale o impulsiva, la modulante è un segnale analogico di ampiez-V m e frequenza fm compresa in una determinata banda B; la portante è costituita da una successione di impulsi di ampiezza, frequenza e durata costanti. Esse comprendono: — PAM: modulazione ad ampiezza di impulsi. Il segnale modulato è composto da una successione di impulsi di ampiezza proporzionale a campioni del segnale modulante prelevati a intervalli rego- lari. La frequenza fp della portante coincide con la frequenza di campionamento fc. Per consentire la ricostruzione del segnale occorre che sia fc H 2B. — PWM, PPM, PFM. Si tratta di modulazioni, usate principalmente nei sistemi di controllo, nelle quali si fa variare, rispettivamente, la larghezza, la posi- zione, la frequenza degli impulsi della portante.  Nelle modulazioni digitali con portante sinusoidale, la modulante è un segnale binario costituito da 0 e 1; la portante è una sinusoide di ampiezza A e fre- quenza fp. — ASK: modulazione a variazione di ampiezza. Il segnale modulato può assumere due valori, per A e AY2, in corrispondenza di 1 e 0. Nella variante OOK (on-off Keying) assume i valori A e 0. — FSK: modulazione a spostamento di frequenza. La portante viene trasmessa con frequenza f 1 o f0 in corrispondenza dei valori binari 1 e 0. La deviazione di frequenza è Df = ; f1 - f0 ;. — PSK: modulazione a spostamento di fase. Il segnale  A transmission system consists of a transmitter, a trans- mission medium or channel and a receiver.  In the modulation process, the modulating signal, which contains the information, varies one or more parameters of a carrier signal; the modulated signal is transmitted and is demodulated.  In analogue modulation techniques with sinusoidal carrier, the modulating wave is an analogue signal of V m and frequency fm in a given band B; the carrier is a sinusoidal signal of amplitude A and frequency fp (with 2 B2fp ). These comprise: — AM: amplitude modulation. The modulating wave varies the amplitude of the carrier wave. The modu-m = k aVmYA. — FM: frequency modulation. The modulating wave varies the frequency of the carrier wave. The fre- quency deviation is defined as Yfk V 2fm rD = and the modulation index as mf = D f Yfm. — PM: phase modulation. The modulating wave varies the instantaneous phase of the carrier wave. The phase shift undergone by the carrier wave when it Di = k pVm and the maximum frequency deviation as Di fm.  In analogue modulation techniques with a digital or pulsed carrier, the modulating wave is an analogue signal V m and frequency fm in a given band B; the carrier wave comprises a succession of constant ampli- tude, frequency and duration pulses. These comprise: — PAM: pulse amplitude modulation. The modulated signal consists of a succession of pulses of amplitude proportional to samples of the modulating signal taken at regular intervals. The frequency fp of the carrier wave coincides with the sampling frequency c. It must be fc H 2B in order to reconstruct the signal. — PWM, PPM, PFM. These modulation techniques are primarily used in control systems in which the , position and frequency of the pulses of the carrier wave are varied.  In digital modulation techniques with sinusoidal carrier, the modulating wave is a binary signal consisting of 0 and 1; the carrier wave is a sinusoid signal of amplitude and frequency f p. — ASK: amplitude-shift keying modulation. The modu- lated signal can have two values, such as A and AY2, corresponding to 1 and 0. In the OOK (on-off keying) variant, the values are A and 0. — FSK: frequency-shift keying modulation. The carrier wave is transmitted with frequency f1 or f0 corre- sponding to binary values 1 and 0. The frequency Df = ; f 1 - f0 ;. — PSK: phase-shift keying modulation. The modulated E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 346 Unità 8 Tecniche di trasmissione analogiche e digitaliSummary modulato presenta, rispetto alla portante, uno sfasa- 180 0occ in corrispondenza dei valori binari 1 e 0. Varianti sono le modulazioni polifase (4PSK, 8PSK) e la modulazione PSK differenziale (DPSK).  Si possono considerare come modulazioni digitali con portante impulsiva alcune tecniche speciali: — PCM: modulazione a impulsi codificati. Il segnale viene campionato e convertito in forma digitale seriale secondo un dato codice: i dati a n bit ven- gono poi convogliati nel canale di trasmissione. — DM: modulazione Delta. Invece di convertire cia- scun campione, viene convertita solo la variazione rispetto al campione precedente.  La conversione di frequenza consente di traslare tutte le componenti dello spettro di un segnale di una quantità costante. Si ottiene utilizzando il miscelatore (mixer) o un moltiplicatore analogico. Alcune applicazioni sono: la modulazione AM, la demodulazione coerente per segnali modulati AM, FM, PM.  La multiplazione consiste nel convogliare in un unico canale trasmissivo informazioni provenienti da più sorgenti. Si attua con due modalità: — FDM: multiplazione a divisione di frequenza. I segna- li con larghezza di banda Bi di N sorgenti vengono traslati a frequenze diverse e combinati in un unico B contenente tutti gli N segnali. — TDM: multiplazione a divisione di tempo. È usata per trasmettere segnali impulsivi come i segnali PCM: i segnali di ciascun canale vengono campio- nati, convertiti e codificati e infine convogliati a intervalli regolari. Si definisce l’intervallo di tempo time slot) come il tempo dedicato alla trasmissione dei segnali di ciascun canale.  La trasmissione dati comprende numerosissime appli- cazioni. Gli aspetti generali sono i seguenti. — I canali di trasmissione, comprendenti le reti LAN, le WLAN, con la tecnologia Wi-Fi e Bluetooth; i collegamenti WAN, comprendendo la rete telefoni- ca pubblica, le reti dedicate, ISDN digitali e ADSL; i collegamenti diretti in ambito limitato. — Le modalità (simplex, half-duplex, full-duplex a 1 via e a 2 vie), i codici e i formati (solitamente ASCII e seriale), i tipi (asincrono e sincrono). — La velocità di trasmissione espressa in bitYs (bit trasmessi in 1 s) o in baud (unità di informazione asmessa in 1 s).  Per collegamenti diretti in ambito limitato, sono state sviluppate numerose interfacce con i relativi protocolli: — RS-232: protocollo sviluppato per la trasmissione dati su linea telefonica mediante modem, in forma semplificata si è affermato anche per le trasmissio-null modem su 2 linee più il riferimento di massa. — spi e i2c: protocolli di comunicazione seriale, rispet- tivamente su 4 linee e 2 linee, molto usati per tra- sferire dati fra pc e dispositivi vari come adc e dac. signal presents a 180 0orcc phase shift with respect to the carrier wave, corresponding to binary values 1 and 0. Variants include polyphase modulation (4PSK, 8PSK) and differential PSK modulation (DPSK).  Digital modulation techniques with pulsed carrier wave can be considered as special techniques: — PCM: pulse-code modulation. The signal is sampled and converted into digital serial form in accordance with a given code: n bits data are then carried in the transmission channel. — DM: delta modulation. Rather than converting each sample, only the variation with respect to the previ- ous sample is converted.  Frequency conversion allows the translation of all the components of the spectrum of a signal of constant quantity. This is done by using a mixer or an analogue multiplier. The following are some applications: AM modulation, coherent demodulation for AM, FM and PM modulated signals.  Multiplexing consists of carrying information from several sources in a single transmission channel. There are two kinds: — FDM: frequency-division multiplexing. Signals with bandwidth Bi from N sources are translated at dif- ferent frequencies and combined in a single signal B containing all the N signals. — TDM: time-division multiplexing. This is used to transmit pulsed signals such as PCM signals; the signals of each channel are sampled, converted and encoded and then transmitted at regular inter- vals. The channel time slot is defined as the time dedicated to the transmission of the signals of each  Data transmission comprises many different applica- tions. The general aspects are set out below. — Transmission channels, comprising LAN and WLAN networks with Wi-Fi and Bluetooth technology; WAN connections, comprising the public telephone network, dedicated networks, digital ISDN and ADSL; direct connections in limited area. — Modes (simplex, half-duplex, full-duplex 1-way and 2-ways), codes and formats (usually ASCII and serial), types (asynchronous and synchronous). — Transmission speed expressed in bit/s (bits trans- mitted in 1 s) or in bauds (units of information transmitted in 1 s).  A number of interfaces with relative protocols have been developed for direct connections in limited area: — RS-232: protocol developed for data transmission on phone lines via a modem, in simplified form it has also been used for serial transmissions in null modem mode on 2 lines only plus the earth reference. — spi and i 2c: these are serial communication protocols, on 4 lines and 2 lines respectively, commonly used to transfer data between pcs and various devices such as adcs and dacs. E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 347 Esercizi 8UNITÀ 1 Sviluppare la relazione che esprime il segnale v(t) modulato in ampiezza v(t) = A (1 + m cos ~m t) cos ~p t e disegnare lo spettro di frequenza dei segnali se l’am- piezza dei segnali modulante e portante sono, rispettivamente, Vm = 1  V e A = 1  V, le relative frequenze sono fm = 1 kHz e fp = 20 kHz, l’indice di modulazione è m = 1.  Dalla relazione indicata (vedi anche par. 8.2, eq. [8.3]) si ricava v(t) = A cos ~p t + mA cos ~m t cos ~p t [1] Ricordando la formula di Werner 2 cos a cos b = cos (a - b ) + cos (a + b ) e considerando a = ~p t e b = ~m t, si sviluppa l’eq. [1] per ottenere la relazione ( ) () ()cos cos cosvt A t mA t mA tt t 22pp m p m~~ ~ ~ ~=+ - + + Passando alle frequenze, con ~p = 2r fp e ~m = 2rfm, si ottiene l’espressione ( ) () ()cos cos cosvt A f t mA ff mA ff tt2 2 2 2 2pp m p mrr r=+ - + + Si evidenziano una componente sinusoidale di ampiezza 1 V e frequenza fp = 20 kHz e 2 com- ponenti di ampiezza 0,5  V e frequenza, rispettivamente, 19  kHz e 21  kHz (vedi diagramma in fig. 8.5). 2 Un segnale sinusoidale di ampiezza Vm = 1  V e frequenza variabile compresa in una banda da 1 a 4 kHz viene modulato in ampiezza, con indice di modulazione m = 0,8, da una portante vp (t) = A cos 2r fp t, con A = 1 V e fp = 20 kHz. Disegnare lo spettro di frequenza dei segnali modulante e modulato. Lo spettro della modulante è composto da infinite righe di ampiezza A e larghezza di banda B = 3 kHz. Con la modulazione esso viene traslato di una frequenza fp = 20 kHz. Dalla relazione ricavata nell’esercizio  1, applicata a tutte le componenti spettrali, si deduce che nello spettro del segnale modulato è presente una componente di frequenza fp = 20 kHz e ampiezza 1 V e due bande laterali di larghezza 3 kHz e ampiezza ,V mA 2 04V== . In ﬁ g. 1 è illustrato lo spettro richiesto. f(kHz) fp = 20 V(V) A 10 0,4 1,0 416 19 20 24 mA 2 mA 2 ﬁ g. 1 3 Indicare come si modificherebbe lo spettro del segnale ricavato nell’esercizio 2 se la banda del segnale modulante si estendesse da 0 a 4 kHz. 4 Un segnale periodico non armonico con banda di frequenza limitata da 0 a 4  kHz f p = 20 kHz. Indicare le caratteristi- che dello spettro di frequenza del segnale modulato. E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 348 Unità 8 Tecniche di trasmissione analogiche e digitaliEsercizi 5 Ricavare lo spettro del segnale modulato AM di ﬁ g. 2. Calcolare le potenze associate allo spettro e il rendimento considerando che il carico applicato all’uscita del modu-R = 500 X. t V(V) Vmax Vmin Tm = 400 µs Tp = 20 µs 3 ﬁ g. 2  Il segnale modulato si esprime come v(t) = A (1 + m cos ~m t) cos ~p t dove, supponendo ka = 1, si ha YmV Am= . L’inviluppo rappresenta la modulante e presenta un’ampiezza Vm = 1 V. Per valutare l’ampiezza della portante si può considerare che, quando cos ~p t =! 1, v(t) assume rispettivamente i valori estremi A + Vm = 3 e A - Vm = 1, da cui si ricava che A = 2. L’indice di modulazione risulta quindi m = 0,5.  La frequenza della portante è Y )(f 120 10 50 kHzp 6–==# mentre fm = 2,5 kHz. Lo spettro è illustrato in ﬁ g.  3. f p = 5047,5 52,5 V(V) f (kHz) A 0 2,0 mA 2 mA 2 ﬁ g. 3  Dalle relazioni [8.8] si ricavano le potenze Pp = 4 mW, PI = 0,25 mW, PS = 0,25 mW, PT = 4,5 mW Il rendimento (vedi eq. [8.10]) vale h = 0,056 (5,56 %). 6 Considerando un segnale FM con deviazione di frequenza Df = 75  kHz e frequenza della modulante sinusoidale fm = 5  kHz, calcolare l’indice di modulazione e la sensi- bilità del modulatore se l’ampiezza della modulante è Vm = 3 V. Valutare la banda di frequenza BT richiesta per la trasmissione.  Ricordando quanto descritto nel par. 8.2.2, si eseguono i calcoli. L’indice di modulazione è 15m f f f m D == . La sensibilità è Y2 2 157k Vf 3 75 kHz rad Vf m rr D == =# ovvero 25 kHzYV E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara Esercizi 349 Unità 8 Tecniche di trasmissione analogiche e digitali  La banda BT può essere calcolata con la formula di Carson (vedi eq. [8.17]) BT = 2fm (1 + mf ) = 2 (Df + fm) = 2 (75 + 5) = 160 kHz Essendo però mf 2 10 2 )f2( f mD si può approssimare il valore a BT - 2 Df = 150 kHz 7 Un segnale sinusoidale con fm = 3  kHz è modulato in frequenza su una portante con fp = 112,7 MHz e Vp = 15 V. Sapendo che il modulatore presenta kf = 100 kHzYV e che Df = 75 kHz, determinare: a) l’ampiezza massima Vm del segnale modulante; b) l’indice di modulazione mf ; c) la banda occupata BT e i suoi limiti inferiore e superiore; d) la potenza trasmessa supponendo che il modulatore sia chiuso su un carico R = 75 X. a) Dalla relazione [8.12] si ricava ,V kf 2 4 71 Vm f r D == b) Dalla relazione [8.15] si ricava mf = 25. c) Dalla relazione [8.17] si ricava BT = 156 kHz; poiché la banda occupata si dispone simme- tricamente rispetto alla portante, i limiti estremi sono, rispettivamente, 34,7 e 190,7 kHz. d) Nella relazione [8.14] si nota che l’ampiezza del segnale modulato è uguale a quella della portante per cui la potenza del segnale modulato coincide con quella della por- tante. Pertanto, dalla relazione [8.7] risulta ,P R V 2 15 W p 2 == . 8 Con riferimento allo schema di principio di fig. 8.12, che illustra la modulazione PAM, B = 4 kHz. Disegnare lo spettro di frequenza del segnale di uscita v(t) e discutere sulla possibilità di rico- struire, in ricezione, il segnale originale nei seguenti casi: a) f c = 8 kHz b) fc = 6 kHz a) Il diagramma è illustrato in ﬁ g. 4, dove per rappresentare le componenti spettrali si usa la rappresentazione convenzionale con triangoli. Si vede che le componenti inserite dalla modulazione (in particolare la banda laterale a sinistra di fc) arrivano fino al limite della banda base del segnale utile. Teoricamente il segnale può essere ricostruito se fc H 2 fm ovvero fc H B (teorema del campionamento di Nyquist-Shannon). Con fc = 8 kHz si è al limite e la possibilità di trattare v(t) con un filtro passa-basso per eliminare le componenti di frequenza indesiderata sono praticamente nulle. f(kHz)16 2fcfc 840 ﬁ g. 4 b) Il diagramma è illustrato in ﬁ g.  5. Non è rispettato il teorema del campionamento, la banda laterale si sovrappone a quella del segnale utile, si produce un effetto di aliasing e il segnale non può essere ricostruito. f(kHz) 2fcfc 0 4 612 3fc 18 ﬁ g. 5 E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 350 Unità 8 Tecniche di trasmissione analogiche e digitaliEsercizi 9 Ripetere l’esercizio 8 considerando che la banda base sia limitata da 300 Hz a 3,4 kHz. Tracciare gli spettri di frequenza di v(t) nei seguenti casi: a) fc = 8 kHz b) fc = 6,8 kHz  a) Il diagramma è illustrato in ﬁ g. 6. I valori di B e fc sono quelli usati nel sistema telefonico, che considera una banda lorda di 4  kHz, ossia un valore nominale di 4  kHz, e una banda netta ossia la banda effettivamente utilizzata per i segnali da 300 Hz a 3,4 kHz. Campionando a 8 kHz è possibile filtrare il segnale utile. f(kHz) 2fcfc 0,3 3,4 8 16 ﬁ g. 6 b) Anche considerando solo la banda netta, fc = 6,8 kHz è al limite del teorema di campio- namento e in pratica il segnale non può essere ricostruito. In ﬁ g. 7 è illustrato lo spettro. f(kHz) 2fcfc 0,3 3,4 6,8 13,6 3fc 20,4 ﬁ g. 7 10 In un sistema di comunicazione FSK si trasmette una successione di bit alternati 0 e v T = 1200 bitYs rappresentabile come un segnale a onda quadra. Determinare la frequenza fm della componente fondamentale del segnale da trasmettere.  Con riferimento alla fig.  8.16, si nota che ciascun bit ha una durata T e quindi il periodo dell’onda quadra vale 2T. La frequenza è 600f T2 1 Hzm == , pari alla metà della velocità di trasmissione espressa in bitYs. 11 Un sistema di comunicazione FSK trasmette un flusso di dati binari con velocità di v T = 1200 bitYs. Le frequenze associate ai valori dei bit sono 1300 kHz e 2100 kHz, rispettivamente per il bit 1 e il bit  0. Calcolare: a) la deviazione di frequenza Df; b) la frequenza della portante fp.  a) 400f ff 2 Hz 01D = - = b) fp = f1 + Df = f0 - Df = 1700 Hz 12 Ripetere l’esercizio 11 considerando che la velocità di trasmissione vT sia 600 bitYs e che i valori per i bit 1 e 0 siano, rispettivamente, 1300 e 1700 Hz. 13 Un segnale fonico va di ampiezza 4 Vpp e frequenza da 0 a 3,4 kHz viene campionato a una frequenza fc = 8 kHz e convertito in forma digitale da un adc a 8 bit con VFS = 5 V e tconv = 1,5 ns. Calcolare: a) il valore del passo di quantizzazione Q; b) l’errore massimo f, espresso in volt e in lsb, commesso durante la conversione; c) il numero N di campioni convertiti in ciascun periodo del segnale fonico. E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara Esercizi 351 Unità 8 Tecniche di trasmissione analogiche e digitali  a) Il passo di quantizzazione, uguale al valore di 1  lsb, vale ,Q V 2 5 19 5 256 mVn FS== = . b) La variazione massima del segnale fonico, costituito da componenti sinusoidali di frequen- za massima 3,4 kHz, durante il tempo di conversione è Dva(max) = 2rfa(max)Va tconv = 64 mV; pertanto l’errore risulta f = 64 mV = 3,3 lsb. c) 2,35N f f a c== . 14 Con riferimento al sistema proposto nell’esercizio 13, determinare l’entità del tempo f G 1 lsb. 15 In ﬁ g.  8 sono rappresentati dati binari espressi in binario puro e in vari codici usati nella codifica PCM. Indicare per ciascun codice le caratteristiche principali. Dati binari Bifase + –– –– –––– – ++ + + + + + + NRZ Clock RZ 50% AMI 50% 10 1 1 0 0 10 1 ﬁ g. 8  NRZ: riproduce l’andamento dei bit del dato in codice binario; contiene una componente continua ma non consente di estrarre il clock in ricezione.50%: è analogo al codice NRZ ma la durata del bit  1 viene ridotta al 50%; contiene anch’esso una componente continua ma consente di estrarre il clock in ricezione; occupa una banda maggiore del codice NRZ. AMI  50%: rispetto al precedente, inverte la polarità del bit 1 in modo alternato (uno no e uno sì) lasciando inalterato lo 0; mediamente ha una componente continua nulla; non consente l’estrazione del clock in ricezione.: è detto anche codice Manchester; associa al bit 1 una semionda positiva più una nega- tiva mentre associa al bit  0 una semionda negativa più una semionda positiva. Non contiene 16 Disegnare le forme d’onda rappresentative dei codici NRZ, RZ, AMI  50% e bifase supponendo che il dato sia una successione di 1 e 0. 17 Nell’ambito della conversione di frequenza, due segnali s (t) = Vs cos ~s t e v0 (t) = V0 cos ~0 t vengono sommati e applicati a un mixer con funzione di trasferimento vk v k v12ii 2=+q . Ricavare l’espressione del segnale di uscita vo.  La somma dei segnali che vengono applicati al mixer è vi (t) = v0 (t) + vs (t) = V0 cos ~0 t + Vs cos ~s t e quindi o = k1 (V0 cos ~0 t + Vs cos ~s t) + k2 (V0 cos ~0 t + Vs cos ~s t) 2 E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 352 Unità 8 Tecniche di trasmissione analogiche e digitaliEsercizi  Sviluppando la relazione si ha vo = k1 V0 cos ~0 t + k1 Vs cos ~s t + k2 V0 2 cos 2 ~0 t + k2 Vs 2 cos2 ~s t + 2 k2 V0 Vs cos ~0 t cos ~s t Il terzo e quarto termine (che contengono cos2) possono essere sviluppati usando la formula di duplicazione del coseno cos 2a = cos 2 a - sen 2 a espressa nella forma cos 2a = 2 cos 2a - 1 cosicché aacos cos 2 1 2 2 1=+^h. Il quinto termine si sviluppa con la formula di Werner 2 cos a cos b = cos (a + b) + cos (a - b) ponendo a = ~0 t e b = ~s t. Sostituendo e raccogliendo a fattore comune si ottiene l’espres- sione finale (vedi eq. [8.25], par. 8.6) vo = 2 1 k2 ()VVs0 22+ + k1 V0 cos ~0 t + k1 Vs cos ~s t + 2 1 k2 (V0 2 cos 2~0 t + Vs 2 cos 2~s t) + + k2 [V0 Vs cos (~0 + ~s) t + V0 Vs cos (~0 - ~s) t]  L’espressione evidenzia una componente continua, componenti di frequenza f0 e fs, le relative componenti armoniche con frequenze 2f0 e 2fs, due componenti di frequenza f0 + fs e f0 + fs. 18 Con riferimento all’espressione ricavata nell’esercizio 17, tracciare il diagramma dello v s (t) e vo(t) supponendo k1 = k2 = 1, V0 = 2 V, Vs = 1 V. 19 Due segnali vs (t) = Vs cos ~s t e v0 (t) = V0 cos ~0 t vengono applicati a un mixer a mol- tiplicatore analogico. Tracciare il diagramma dello spettro di frequenza di vs (t) e del segnale vo (t) all’uscita del mixer supponendo V0 = 2 V e Vs = 1 V.  Ricordando l’eq. [8.26] si ricava lo spettro di ﬁ g. 9. fs f0f0 – fs f0 + fs V(V) f 1,0 0 ﬁ g. 9 20 Lo schema di ﬁ g. 10 rappresenta un moltiplicatore che, accettando in ingresso i segna- li X e Y, fornisce in uscita il prodotto V XY 10 =q . Supponendo che i segnali X e Y siano, rispettivamente, vm (t) = Vm cos ~m t e vp (t) = A cos ~p t, di ampiezza Vm = 1  V e A = 10  V, e frequenza fm = 1  kHz e fp = 20  kHz, ricavare l’espressione del segnale di uscita vo(t) e disegnare lo spettro di frequenza. X Y XY 10× ﬁ g. 10  Il segnale di uscita si esprime come () cos cosvt XY VA tt 10 10 m mpo ~~== # Applicando le formule di Werner e ponendo ~ = 2rf si ricava ( ) () ()cos cosvt VA ff t VA ff t 20 2 20 2pm m mo m prr=- ++ Sono presenti solo le due componenti laterali a fp, di ampiezza 0,5 V e di frequenza 19 e 21 kHz; manca la portante a frequenza fp = 20 kHz. Il circuito costituisce un modulatore bilanciato che realizza una modulazione di tipo DSB. La demodulazione richiede la reintroduzione della portante. E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara Esercizi 353 Unità 8 Tecniche di trasmissione analogiche e digitali 21 Il sistema di ﬁ g. 11, con i valori dei parametri sotto indicati, realizza una modulazione AM. Ricavare l’espressione del segnale di uscita. Indicare le possibili tecniche di V off = 10 V vm = Vm cos 2r fm t vp = A cos 2r fp t Vm = 1 V A = 10 V fm = 1 kHz fp = 20 kHz vo =v′ vp –Voff –vm XY 10× X + 10 kΩ 10 kΩ 10 kΩ – Y o ﬁ g. 11  L’operazionale fornisce un segnale cosvV V f t2om mffo r=+l che viene moltiplicato per il segnale portante vp. Risulta () ()cos cos cosv VA ft V ff t V ff t AA 10 2 20 2 20 2p m pm m pmo off rr r=+ - + +  Questo è un segnale AM modulato con indice di modulazione m = 0,1, che contiene la componente di frequenza fp. Può essere demodulato con un rivelatore di inviluppo a diodo e capacità (vedi fig.  8.7). Potrebbe essere usata, anche se assai più complessa, la tecnica di demodulazione sincrona. 22 Un sistema TDM-PCM è costituito da N = 12 canali fonici, ciascuno con frequenza massima fm = 4 kHz. Supponendo di campionare i segnali con una frequenza fc = 8 kHz e di convertirli con un adc a 8 bit, determinare: a) la durata della trama; b) l’intervallo di tempo di canale IT; c) la frequenza di cifra di canale f e la frequenza di trama fT, espresse in bitYs.  Per quanto indicato nel par.  8.7.2, la durata della trama è pari a n f 1 125 s c = , mentre nY() ,N125 10 10 4IT s 6== -# . Inoltre si ha Yf 64 kbit s= e Yf 768 kbit sT = . 23 Un sistema TDM-PCM è costituito da N = 24 canali ciascuno con banda limitata B = 4 kHz. Determinare: a) la frequenza di campionamento fc(min); b) l’intervallo di tempo di canale IT; c) la durata di ciascun bit, nell’ipotesi di realizzare la conversione aYd a 8 bit; d) la frequenza di cifra di canale f, espressa in bitYs; e) la frequenza di trama fT, espressa in bitYs, nell’ipotesi di una trasmissione seriale a 8 bit per canale. 24 Rappresentare graficamente il carattere 83H, con il bit di parità (parità pari) e 1  bit di stop, su una linea asincrona RS-232 e il corrispondente carattere all’uscita di un -receiver. E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 354 Unità 8 Tecniche di trasmissione analogiche e digitaliEsercizi  La trasmissione avviene a partire dal lsb. In ﬁ g. 12 è illustrato l’andamento dei segnali. STOPSTART 1 +10 V –10 V 5 V 0 01 0 000 1 P Segnale Segnale Dato binario 83H ﬁ g. 12 25 Ripetere l’esercizio  24 supponendo che il carattere sia 73H e che si sia scelta la con- venzione di parità dispari. 26 Un sistema di comunicazione RS-232 lavora con velocità di trasmissione 19 600 baud. v byte con cui può essere trasferita una sequenza di dati, cia- scuno composto da 8 bit, senza bit di parità e con 1  bit di stop.  Il trasferimento di ciascun byte di dato corrisponde al trasferimento di 10  bit. Pertanto vbyte = 1960 byteYs. 27 L’integrato MAX517 contiene 1 dac con ingresso seriale con interfaccia i2c. La sequenza necessaria per immagazzinare i dati digitali nel buffer di ingresso del dac, e conseguentemente ottenere in uscita il corrispondente valore analogico, è la — invio del bit di start; — invio del byte di indirizzo corrispondente a 01011000 (in questo caso, con un solo dac con i pin 5 e 6 a massa, per un’operazione di scrittura ossia invio del dato — invio del byte di controllo corrispondente a 00000000 (in questo caso, per una normale operazione di invio del dato da convertire, escludendo l’operazione di e di power down); — invio del dato AB H. Disegnare le forme d’onda sulle linee SCL e SDA se il dato inviato è ABH eviden- ziando i bit di acknowledge e di stop. DIP/SO OUT0 GND SCL SDA REF0 VDD AD0 AD1 MAX517 1 8 ﬁ g. 13 E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara Esercizi 355 Unità 8 Tecniche di trasmissione analogiche e digitali  In ﬁ g. 14 sono illustrate le forme d’onda; la linea SDA è disegnata «sdoppiata» per eviden- ziarne lo stato quando è pilotata dal master, per esempio un microcontrollore, e quando è dac. SCL pilotata dal master SDA pilotata dal master SDA pilotata dallo slave DACSTART Indirizzo del DAC 0 1 0 1 1 0 0 0 00 0 0 00 0 1 0 10 1 0 1 1 Byte di controllo Dato da convertire AB (Hex) LSB HHH H MSBMSB LSBSTOPRW = 0 ACK ACK ACK ﬁ g. 14 28 Il dac MAX517 dispone di un’interfaccia seriale i2c che consente una velocità di trasferimento di 400  kbitYs. Determinare la massima velocità con cui possono essere trasferiti i byte dei dati da convertire se ciascun trasferimento avviene con la tempo- rizzazione di fig.  14.  L’interfaccia lavora in fast-mode. Per trasferire un byte di dato occorrono 29 cicli di clock; se tCK = 2,5  ns, la velocità di trasferimento dei dati è circa 13,8  kbyteYs. 29 Ripetere l’esercizio  28 supponendo che l’interfaccia possa lavorare nella modalità -mode-plus a 1 MbitYs e che, dovendo inviare più dati in sequenza, non richieda, per ciascun dato, l’invio del byte di indirizzo, del byte di controllo, dello start e E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara 356 Tecniche di trasmissione analogiche e digitali Veriﬁ ca delle competenze8UNITÀ 7 La tecnica ASK è una modulazione: A analogica con portante digitale B digitale con portante analogica C digitale usata nei modem D analogica usata nei modem 8 Disponendo di una gamma di frequenze da 88 MHz a 108 MHz si possono convogliare con tecnica FDM B = 20  kHz provenienti da un numero di sorgenti pari a: A 10 B 100 C 1000 D illimitato 9 Nel sistema di trasmissione PCM telefonico la dura- ta della trama e l’intervallo di tempo di canale sono: A 125 ms e 3,9 ms B 3,9 ns e 125 ns C 125  ns e 3,9 ns D 3,9  ns e 125 ns 10 La trasmissione half-duplex fra 2 unità A e B avviene: A in entrambi i sensi, contemporaneamente, a velocità dimezzata rispetto al modo full-duplex B in entrambi i sensi, alternativamente C in entrambi i sensi, contemporaneamente se si usa una modulazione speciale D in un solo senso 11 I protocolli spi e i 2c, rispettivamente, prevedono: A 4 e 2 linee seriali per i dati B 2 linee e 1 linea seriali per i dati C entrambi 1 linea di selezione D linea di clock e linea di selezione 12 Nello standard RS-232: a) la condizione on di una linea di controllo corrisponde a una tensione 2 3 V V F b) è sempre presente il bit di parità V F c) il bit di start corrisponde a una tensione 1- 3 V V F d) se la trasmissione è asincrona non è richiesto clock V F 1 Lo spettro di un segnale sinusoidale modulato in m = 0,4 e modulante di ampiezza A pre- senta una componente f p e 2 righe laterali rispetti- vamente di ampiezza: A A e 0,2 A B A e A 2 C 2A e 0,2 A D A e 0,4 A 2 Lo spettro di un segnale modulato in SSB, con por- tante e modulante sinusoidale di frequenza rispetti- vamente fp e fm, contiene: A 2 righe alle frequenze fp - fm e fp + fm B 3 righe alle frequenze fp - fm, fp e fp + fm C 1 riga alla frequenza fp - fm D 1 riga alla frequenza fp 3 Lo spettro di un segnale a banda limitata B modu- lato in DBS si estende: A da fp a fp + B B da 0 a 2B C da fp - B a fp + B D da B - fp a B + fp 4 Nella modulazione FM l’ampiezza del segnale modu- A variabile in modo continuo B variabile in modo discreto C uguale a quello della modulante D uguale a quello della portante 5 Lo spettro di un segnale con frequenza massima fm modulato in FM occupa una banda: A BT = 2 (Df + fm) B BT = 2 Df + fm C BT = 2 fm D BT = 2 Df 6 Il segnale PAM è: A un segnale codificato B un segnale numerico C una sequenza di impulsi D una sequenza di impulsi di ampiezza proporzionale a campioni del segnale modulante E&E 3B - Petrini © 2013 De Agostini Scuola SpA – Novara","libVersion":"0.2.3","langs":""}